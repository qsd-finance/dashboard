{"ast":null,"code":"import { _ as _slicedToArray } from './slicedToArray-4e274c67.js';\nimport './unsupportedIterableToArray-137e449b.js';\nimport React, { useState, useCallback, useEffect, useMemo, useRef } from 'react';\nimport './_commonjsHelpers-97e6d7b1.js';\nimport { P as PropTypes } from './index-097535f1.js';\nimport './defineProperty-a0480c32.js';\nimport './toConsumableArray-127424c2.js';\nimport _styled from 'styled-components';\nimport './getPrototypeOf-b96da1e1.js';\nimport './color.js';\nimport './components.js';\nimport './contains-component.js';\nimport { unselectable } from './css.js';\nimport './dayjs.min-e57fb69a.js';\nimport './date.js';\nimport './miscellaneous.js';\nimport { warnOnce } from './environment.js';\nimport './font.js';\nimport './math-e6d0e93a.js';\nimport './characters.js';\nimport './format.js';\nimport './keycodes.js';\nimport './url.js';\nimport './web3.js';\nimport { RADIUS, GU } from './constants.js';\nimport './breakpoints.js';\nimport './springs.js';\nimport { textStyle } from './text-styles.js';\nimport './theme-dark.js';\nimport './theme-light.js';\nimport { useTheme } from './Theme.js';\nimport { _ as _extends } from './extends-db4f0c26.js';\nimport { _ as _objectWithoutProperties } from './objectWithoutProperties-234758e1.js';\nimport { i } from './index-422d37c0.js';\nimport './isObject-3c6ec07e.js';\nimport { u as useViewport } from './Viewport-cc7debfb.js';\nimport './FocusVisible.js';\nimport ButtonBase from './ButtonBase.js';\nimport './IconPropTypes-aab7337d.js';\nimport './IconAddUser.js';\nimport './IconAlert.js';\nimport './IconAlignCenter.js';\nimport './IconAlignJustify.js';\nimport './IconAlignLeft.js';\nimport './IconAlignRight.js';\nimport './IconAragon.js';\nimport './IconArrowDown.js';\nimport './IconArrowLeft.js';\nimport './IconArrowRight.js';\nimport './IconArrowUp.js';\nimport './IconAtSign.js';\nimport './IconBlock.js';\nimport './IconBookmark.js';\nimport './IconCalendar.js';\nimport './IconCanvas.js';\nimport './IconCaution.js';\nimport './IconCenter.js';\nimport './IconChart.js';\nimport './IconChat.js';\nimport './IconCheck.js';\nimport './IconChip.js';\nimport './IconCircleCheck.js';\nimport './IconCircleMinus.js';\nimport './IconCirclePlus.js';\nimport './IconClock.js';\nimport './IconCloudDownload.js';\nimport './IconCloudUpload.js';\nimport './IconCoin.js';\nimport './IconConfiguration.js';\nimport './IconConnect.js';\nimport './IconConnection.js';\nimport './IconConsole.js';\nimport './IconCopy.js';\nimport './IconCross.js';\nimport './IconDashedSquare.js';\nimport IconDown from './IconDown.js';\nimport './IconDownload.js';\nimport './IconEdit.js';\nimport './IconEllipsis.js';\nimport './IconEnter.js';\nimport './IconEthereum.js';\nimport './IconExternal.js';\nimport './IconFile.js';\nimport './IconFilter.js';\nimport './IconFlag.js';\nimport './IconFolder.js';\nimport './IconGraph2.js';\nimport './IconGraph.js';\nimport './IconGrid.js';\nimport './IconGroup.js';\nimport './IconHash.js';\nimport './IconHeart.js';\nimport './IconHide.js';\nimport './IconHome.js';\nimport './IconImage.js';\nimport './IconInfo.js';\nimport './IconLabel.js';\nimport './IconLayers.js';\nimport './IconLeft.js';\nimport './IconLink.js';\nimport './IconLocation.js';\nimport './IconLock.js';\nimport './IconMail.js';\nimport './IconMaximize.js';\nimport './IconMenu.js';\nimport './IconMinimize.js';\nimport './IconMinus.js';\nimport './IconMove.js';\nimport './IconNoPicture.js';\nimport './IconPicture.js';\nimport './IconPlus.js';\nimport './IconPower.js';\nimport './IconPrint.js';\nimport './IconProhibited.js';\nimport './IconQuestion.js';\nimport './IconRefresh.js';\nimport './IconRemoveUser.js';\nimport './IconRight.js';\nimport './IconRotateLeft.js';\nimport './IconRotateRight.js';\nimport './IconSearch.js';\nimport './IconSettings.js';\nimport './IconShare.js';\nimport './IconSquareMinus.js';\nimport './IconSquarePlus.js';\nimport './IconSquare.js';\nimport './IconStarFilled.js';\nimport './IconStar.js';\nimport './IconSwap.js';\nimport './IconTarget.js';\nimport './IconToken.js';\nimport './IconTrash.js';\nimport './IconUnlock.js';\nimport './IconUp.js';\nimport './IconUpload.js';\nimport './IconUser.js';\nimport './IconView.js';\nimport './IconVote.js';\nimport './IconWallet.js';\nimport './IconWarning.js';\nimport './IconWorld.js';\nimport './IconWrite.js';\nimport './IconZoomIn.js';\nimport './IconZoomOut.js';\nimport './objectWithoutPropertiesLoose-9606ad13.js';\nimport 'react-dom';\nimport './web-a351a0a1.js';\nimport './getDisplayName-d5fc7707.js';\nimport './index-edfeada6.js';\nimport './index-f754c2df.js';\nimport './RootPortal.js';\nimport './proptypes-c8a77d05.js';\nimport Popover from './Popover.js';\nimport './observe.js';\nimport './index-f0d64c59.js';\nimport './providers.js';\nvar MIN_WIDTH = 128;\n\nfunction useDropDown(_ref) {\n  var buttonRef = _ref.buttonRef,\n      items = _ref.items,\n      displayedLabel = _ref.displayedLabel,\n      onChange = _ref.onChange,\n      placeholder = _ref.placeholder,\n      selected = _ref.selected;\n\n  var _useState = useState(displayedLabel),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedLabel = _useState2[0],\n      setSelectedLabel = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      opened = _useState4[0],\n      setOpened = _useState4[1];\n\n  var close = useCallback(function () {\n    setOpened(false);\n\n    if (buttonRef.current) {\n      buttonRef.current.focus();\n    }\n  }, [buttonRef]);\n  var toggle = useCallback(function () {\n    return setOpened(function (opened) {\n      return !opened;\n    });\n  }, []);\n  var handleItemSelect = useCallback(function (index) {\n    onChange(index);\n    close();\n  }, [onChange, close]);\n  useEffect(function () {\n    if (selected === -1 || !items[selected]) {\n      if (displayedLabel) {\n        setSelectedLabel(displayedLabel);\n      }\n\n      return;\n    }\n\n    setSelectedLabel(items[selected]);\n  }, [items, selected, displayedLabel]);\n  return {\n    handleItemSelect: handleItemSelect,\n    close: close,\n    toggle: toggle,\n    opened: opened,\n    selectedLabel: selectedLabel\n  };\n}\n\nfunction useButtonRef(cb) {\n  var buttonRef = useRef(null);\n  var refCallback = useCallback(function (el) {\n    if (el) {\n      cb(el);\n    }\n\n    buttonRef.current = el;\n  }, [cb]);\n  return {\n    buttonRef: buttonRef,\n    refCallback: refCallback\n  };\n}\n\nvar _StyledButtonBase = _styled(ButtonBase).withConfig({\n  displayName: \"DropDown___StyledButtonBase\",\n  componentId: \"sc-17zpefi-0\"\n})([\"display:\", \";justify-content:space-between;align-items:center;height:\", \"px;padding-left:\", \"px;padding-right:\", \"px;width:\", \";min-width:\", \";background:\", \";color:\", \";border:\", \"px solid \", \";\", \";\", \"\"], function (p) {\n  return p._css;\n}, function (p) {\n  return p._css2;\n}, function (p) {\n  return p._css3;\n}, function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n}, function (p) {\n  return p._css6;\n}, function (p) {\n  return p._css7;\n}, function (p) {\n  return p._css8;\n}, function (p) {\n  return p._css9;\n}, function (p) {\n  return p._css10;\n}, function (p) {\n  return p._css11;\n}, function (p) {\n  return p._css12;\n});\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"DropDown___StyledDiv\",\n  componentId: \"sc-17zpefi-1\"\n})([\"overflow:hidden;\"]);\n\nvar _StyledIconDown = _styled(IconDown).withConfig({\n  displayName: \"DropDown___StyledIconDown\",\n  componentId: \"sc-17zpefi-2\"\n})([\"margin-left:\", \"px;color:\", \";\"], function (p) {\n  return p._css13;\n}, function (p) {\n  return p._css14;\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"DropDown___StyledDiv2\",\n  componentId: \"sc-17zpefi-3\"\n})([\"position:absolute;top:-100vh;left:-100vw;opacity:0;visibility:hidden;\"]);\n\nvar DropDown = React.memo(function DropDown(_ref2) {\n  var disabled = _ref2.disabled,\n      header = _ref2.header,\n      items = _ref2.items,\n      onChange = _ref2.onChange,\n      placeholder = _ref2.placeholder,\n      renderLabel = _ref2.renderLabel,\n      selected = _ref2.selected,\n      wide = _ref2.wide,\n      width = _ref2.width,\n      active = _ref2.active,\n      label = _ref2.label,\n      props = _objectWithoutProperties(_ref2, [\"disabled\", \"header\", \"items\", \"onChange\", \"placeholder\", \"renderLabel\", \"selected\", \"wide\", \"width\", \"active\", \"label\"]);\n\n  if (active !== undefined) {\n    warnOnce('DropDown:active', 'The “active” prop is deprecated. Please use “selected” to pass the selected index instead.');\n  }\n\n  if (label !== undefined) {\n    warnOnce('DropDown:label', 'DropDown: the “label” prop is deprecated, please use “placeholder” instead.');\n  }\n\n  var theme = useTheme();\n\n  var _useViewport = useViewport(),\n      vw = _useViewport.width;\n\n  var _split = (width || '').split('px'),\n      _split2 = _slicedToArray(_split, 1),\n      _split2$ = _split2[0],\n      widthNoPx = _split2$ === void 0 ? MIN_WIDTH : _split2$;\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      buttonWidth = _useState6[0],\n      setButtonWidth = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measureWidth = _useState8[0],\n      setMeasureWidth = _useState8[1]; // Adjust the button width if the item widths are larger than declared width\n\n\n  var _useState9 = useState(Math.min(widthNoPx, MIN_WIDTH)),\n      _useState10 = _slicedToArray(_useState9, 2),\n      placeholderMinWidth = _useState10[0],\n      setPlaceholderMinWidth = _useState10[1];\n\n  var popoverRefCallback = useCallback(function (el) {\n    if (!el) {\n      return;\n    }\n\n    setPlaceholderMinWidth(el.clientWidth);\n    setMeasureWidth(false);\n  }, []);\n  useEffect(function () {\n    setMeasureWidth(true);\n  }, [vw, items]); // Update the button width every time the reference updates\n\n  var _useButtonRef = useButtonRef(function (el) {\n    setButtonWidth(el.clientWidth);\n  }),\n      refCallback = _useButtonRef.refCallback,\n      buttonRef = _useButtonRef.buttonRef; // And every time the viewport resizes\n\n\n  useEffect(function () {\n    if (!buttonRef.current) {\n      return;\n    }\n\n    setButtonWidth(buttonRef.current.clientWidth);\n  }, [buttonRef, vw]);\n  var selectedIndex = useMemo(function () {\n    if (selected !== undefined) {\n      return selected;\n    }\n\n    if (active !== undefined) {\n      return active;\n    }\n\n    return -1;\n  }, [active, selected]);\n\n  var _useDropDown = useDropDown({\n    buttonRef: buttonRef,\n    displayedLabel: placeholder || label,\n    items: items,\n    onChange: onChange,\n    selected: selected\n  }),\n      handleItemSelect = _useDropDown.handleItemSelect,\n      close = _useDropDown.close,\n      toggle = _useDropDown.toggle,\n      opened = _useDropDown.opened,\n      selectedLabel = _useDropDown.selectedLabel;\n\n  var closedWithChanges = !opened && selectedIndex !== -1;\n  var Label = renderLabel;\n  return /*#__PURE__*/React.createElement(i, {\n    name: \"DropDown\"\n  }, /*#__PURE__*/React.createElement(_StyledButtonBase, _extends({\n    ref: refCallback,\n    disabled: disabled,\n    onClick: toggle,\n    focusRingRadius: RADIUS,\n    focusRingSpacing: 1\n  }, props, {\n    _css: wide ? 'flex' : 'inline-flex',\n    _css2: 5 * GU,\n    _css3: 2 * GU,\n    _css4: 1.5 * GU,\n    _css5: width || (wide ? '100%' : 'auto'),\n    _css6: wide ? 'auto' : \"\".concat(placeholderMinWidth, \"px\"),\n    _css7: disabled ? theme.disabled : theme.surface,\n    _css8: disabled ? theme.disabledContent : theme.surfaceContent,\n    _css9: disabled ? 0 : 1,\n    _css10: closedWithChanges ? theme.selected : theme.border,\n    _css11: textStyle('body2'),\n    _css12: disabled ? 'font-weight: 600;' : \"\\n              &:active {\\n                background: \".concat(theme.surfacePressed, \";\\n              }\\n            \")\n  }), /*#__PURE__*/React.createElement(_StyledDiv, null, /*#__PURE__*/React.createElement(Label, {\n    selectedIndex: selectedIndex,\n    selectedLabel: selectedLabel\n  })), /*#__PURE__*/React.createElement(_StyledIconDown, {\n    size: \"tiny\",\n    _css13: 1.5 * GU,\n    _css14: disabled ? theme.disabledIcon : closedWithChanges ? theme.accent : theme.surfaceIcon\n  })), measureWidth && /*#__PURE__*/React.createElement(_StyledDiv2, null, /*#__PURE__*/React.createElement(PopoverContent, {\n    refCallback: popoverRefCallback,\n    buttonWidth: buttonWidth,\n    header: header,\n    items: items\n  })), /*#__PURE__*/React.createElement(Popover, {\n    onClose: close,\n    opener: buttonRef.current,\n    visible: opened\n  }, /*#__PURE__*/React.createElement(PopoverContent, {\n    buttonWidth: buttonWidth,\n    header: header,\n    items: items,\n    handleItemSelect: handleItemSelect,\n    selectedIndex: selectedIndex\n  })));\n});\nDropDown.propTypes = {\n  disabled: PropTypes.bool,\n  header: PropTypes.node,\n  items: PropTypes.arrayOf(PropTypes.node).isRequired,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.node,\n  renderLabel: PropTypes.func,\n  selected: PropTypes.number,\n  wide: PropTypes.bool,\n  width: PropTypes.string,\n  // deprecated\n  active: PropTypes.number,\n  label: PropTypes.string\n};\nDropDown.defaultProps = {\n  placeholder: 'Select an item',\n  renderLabel: function renderLabel(_ref3) {\n    var selectedLabel = _ref3.selectedLabel;\n    return selectedLabel;\n  },\n  wide: false\n};\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"DropDown___StyledDiv3\",\n  componentId: \"sc-17zpefi-4\"\n})([\"min-width:\", \"px;color:\", \";\"], function (p) {\n  return p._css15;\n}, function (p) {\n  return p._css16;\n});\n\nvar _StyledDiv4 = _styled(\"div\").withConfig({\n  displayName: \"DropDown___StyledDiv4\",\n  componentId: \"sc-17zpefi-5\"\n})([\"padding:\", \"px \", \"px \", \"px;\", \";\", \";\"], function (p) {\n  return p._css17;\n}, function (p) {\n  return p._css18;\n}, function (p) {\n  return p._css19;\n}, function (p) {\n  return p._css20;\n}, unselectable);\n\nvar _StyledUl = _styled(\"ul\").withConfig({\n  displayName: \"DropDown___StyledUl\",\n  componentId: \"sc-17zpefi-6\"\n})([\"margin:0;padding:0;list-style:none;width:100%;\"]);\n\nvar PopoverContent = React.memo(function PopoverContent(_ref4) {\n  var refCallback = _ref4.refCallback,\n      buttonWidth = _ref4.buttonWidth,\n      header = _ref4.header,\n      items = _ref4.items,\n      handleItemSelect = _ref4.handleItemSelect,\n      selectedIndex = _ref4.selectedIndex;\n  var theme = useTheme();\n  return /*#__PURE__*/React.createElement(_StyledDiv3, {\n    _css15: buttonWidth,\n    _css16: theme.surfaceContentSecondary\n  }, header && /*#__PURE__*/React.createElement(_StyledDiv4, {\n    _css17: 1.5 * GU,\n    _css18: 2 * GU,\n    _css19: 1.25 * GU,\n    _css20: textStyle('label2')\n  }, header), /*#__PURE__*/React.createElement(_StyledUl, {\n    ref: refCallback\n  }, /*#__PURE__*/React.createElement(i, {\n    name: \"DropDown:menu\"\n  }, items.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(Item, {\n      key: index,\n      index: index,\n      onSelect: handleItemSelect,\n      theme: theme,\n      item: item,\n      header: header,\n      length: items.length,\n      selected: selectedIndex\n    });\n  }))));\n});\nPopoverContent.propTypes = {\n  refCallback: PropTypes.func.isRequired,\n  buttonWidth: PropTypes.number.isRequired,\n  header: PropTypes.node,\n  items: PropTypes.array.isRequired,\n  handleItemSelect: PropTypes.func.isRequired,\n  selectedIndex: PropTypes.number.isRequired\n};\nPopoverContent.defaultProps = {\n  refCallback: function refCallback() {\n    return null;\n  },\n  handleItemSelect: function handleItemSelect() {\n    return null;\n  },\n  selectedIndex: -1\n};\n\nvar _StyledButtonBase2 = _styled(ButtonBase).withConfig({\n  displayName: \"DropDown___StyledButtonBase2\",\n  componentId: \"sc-17zpefi-7\"\n})([\"width:100%;text-align:left;padding:\", \"px \", \"px;border-radius:0;color:\", \";\", \";\", \" \", \" \", \" &:active{background:\", \";}\"], function (p) {\n  return p._css21;\n}, function (p) {\n  return p._css22;\n}, function (p) {\n  return p._css23;\n}, function (p) {\n  return p._css24;\n}, function (p) {\n  return p._css25;\n}, function (p) {\n  return p._css26;\n}, function (p) {\n  return p._css27;\n}, function (p) {\n  return p._css28;\n});\n\nvar Item = React.memo(function Item(_ref5) {\n  var header = _ref5.header,\n      index = _ref5.index,\n      item = _ref5.item,\n      length = _ref5.length,\n      onSelect = _ref5.onSelect,\n      selected = _ref5.selected,\n      theme = _ref5.theme;\n  var handleClick = useCallback(function () {\n    onSelect(index);\n  }, [index, onSelect]);\n  return /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(_StyledButtonBase2, {\n    onClick: handleClick,\n    _css21: 1.25 * GU,\n    _css22: 2 * GU,\n    _css23: theme.content,\n    _css24: textStyle('body2'),\n    _css25: !header && index === 0 ? \"border-top-left-radius: \".concat(RADIUS, \"px;\") : '',\n    _css26: index === length - 1 ? \"border-bottom-left-radius: \".concat(RADIUS, \"px;\") : '',\n    _css27: selected === index ? \"\\n              border-left: 2px solid \".concat(theme.accent, \";\\n              background: \").concat(theme.surfaceSelected, \";\\n            \") : '',\n    _css28: theme.surfacePressed\n  }, item));\n});\nItem.propTypes = {\n  header: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  item: PropTypes.node.isRequired,\n  length: PropTypes.number.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selected: PropTypes.number.isRequired,\n  theme: PropTypes.object.isRequired\n};\nexport default DropDown;","map":{"version":3,"sources":["../../src/components/DropDown/DropDown.js"],"names":["MIN_WIDTH","buttonRef","items","displayedLabel","onChange","placeholder","selected","selectedLabel","setSelectedLabel","useState","opened","setOpened","close","useCallback","toggle","handleItemSelect","useEffect","useRef","refCallback","cb","DropDown","disabled","header","renderLabel","wide","width","active","label","props","warnOnce","theme","useTheme","vw","useViewport","widthNoPx","buttonWidth","setButtonWidth","measureWidth","setMeasureWidth","placeholderMinWidth","setPlaceholderMinWidth","Math","popoverRefCallback","el","useButtonRef","selectedIndex","useMemo","useDropDown","closedWithChanges","Label","textStyle","surfaceIcon","PropTypes","string","PopoverContent","surfaceContentSecondary","unselectable","isRequired","Item","index","item","length","onSelect","handleClick","surfacePressed"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { Inside } from 'use-inside'\nimport { warnOnce, unselectable } from '../../utils'\nimport { GU, RADIUS, textStyle } from '../../style'\nimport { useTheme } from '../../theme'\nimport { IconDown } from '../../icons'\nimport { useViewport } from '../../providers/Viewport/Viewport'\nimport ButtonBase from '../ButtonBase/ButtonBase'\nimport Popover from '../Popover/Popover'\n\nconst MIN_WIDTH = 128\n\nfunction useDropDown({\n  buttonRef,\n  items,\n  displayedLabel,\n  onChange,\n  placeholder,\n  selected,\n}) {\n  const [selectedLabel, setSelectedLabel] = useState(displayedLabel)\n  const [opened, setOpened] = useState(false)\n\n  const close = useCallback(() => {\n    setOpened(false)\n\n    if (buttonRef.current) {\n      buttonRef.current.focus()\n    }\n  }, [buttonRef])\n\n  const toggle = useCallback(() => setOpened(opened => !opened), [])\n\n  const handleItemSelect = useCallback(\n    index => {\n      onChange(index)\n      close()\n    },\n    [onChange, close]\n  )\n\n  useEffect(() => {\n    if (selected === -1 || !items[selected]) {\n      if (displayedLabel) {\n        setSelectedLabel(displayedLabel)\n      }\n      return\n    }\n    setSelectedLabel(items[selected])\n  }, [items, selected, displayedLabel])\n\n  return {\n    handleItemSelect,\n    close,\n    toggle,\n    opened,\n    selectedLabel,\n  }\n}\n\nfunction useButtonRef(cb) {\n  const buttonRef = useRef(null)\n\n  const refCallback = useCallback(\n    el => {\n      if (el) {\n        cb(el)\n      }\n      buttonRef.current = el\n    },\n    [cb]\n  )\n\n  return {\n    buttonRef,\n    refCallback,\n  }\n}\n\nconst DropDown = React.memo(function DropDown({\n  disabled,\n  header,\n  items,\n  onChange,\n  placeholder,\n  renderLabel,\n  selected,\n  wide,\n  width,\n\n  // deprecated\n  active,\n  label,\n\n  // rest\n  ...props\n}) {\n  if (active !== undefined) {\n    warnOnce(\n      'DropDown:active',\n      'The “active” prop is deprecated. Please use “selected” to pass the selected index instead.'\n    )\n  }\n  if (label !== undefined) {\n    warnOnce(\n      'DropDown:label',\n      'DropDown: the “label” prop is deprecated, please use “placeholder” instead.'\n    )\n  }\n\n  const theme = useTheme()\n  const { width: vw } = useViewport()\n\n  const [widthNoPx = MIN_WIDTH] = (width || '').split('px')\n  const [buttonWidth, setButtonWidth] = useState(0)\n  const [measureWidth, setMeasureWidth] = useState(true)\n\n  // Adjust the button width if the item widths are larger than declared width\n  const [placeholderMinWidth, setPlaceholderMinWidth] = useState(\n    Math.min(widthNoPx, MIN_WIDTH)\n  )\n  const popoverRefCallback = useCallback(el => {\n    if (!el) {\n      return\n    }\n    setPlaceholderMinWidth(el.clientWidth)\n    setMeasureWidth(false)\n  }, [])\n  useEffect(() => {\n    setMeasureWidth(true)\n  }, [vw, items])\n\n  // Update the button width every time the reference updates\n  const { refCallback, buttonRef } = useButtonRef(el => {\n    setButtonWidth(el.clientWidth)\n  })\n  // And every time the viewport resizes\n  useEffect(() => {\n    if (!buttonRef.current) {\n      return\n    }\n    setButtonWidth(buttonRef.current.clientWidth)\n  }, [buttonRef, vw])\n\n  const selectedIndex = useMemo(() => {\n    if (selected !== undefined) {\n      return selected\n    }\n    if (active !== undefined) {\n      return active\n    }\n    return -1\n  }, [active, selected])\n\n  const {\n    handleItemSelect,\n    close,\n    toggle,\n    opened,\n    selectedLabel,\n  } = useDropDown({\n    buttonRef,\n    displayedLabel: placeholder || label,\n    items,\n    onChange,\n    selected,\n  })\n\n  const closedWithChanges = !opened && selectedIndex !== -1\n  const Label = renderLabel\n\n  return (\n    <Inside name=\"DropDown\">\n      <ButtonBase\n        ref={refCallback}\n        disabled={disabled}\n        onClick={toggle}\n        focusRingRadius={RADIUS}\n        focusRingSpacing={1}\n        css={`\n          display: ${wide ? 'flex' : 'inline-flex'};\n          justify-content: space-between;\n          align-items: center;\n          height: ${5 * GU}px;\n          padding-left: ${2 * GU}px;\n          padding-right: ${1.5 * GU}px;\n          width: ${width || (wide ? '100%' : 'auto')};\n          min-width: ${wide ? 'auto' : `${placeholderMinWidth}px`};\n          background: ${disabled ? theme.disabled : theme.surface};\n          color: ${disabled ? theme.disabledContent : theme.surfaceContent};\n          border: ${disabled ? 0 : 1}px solid\n            ${closedWithChanges ? theme.selected : theme.border};\n          ${textStyle('body2')};\n          ${disabled\n            ? 'font-weight: 600;'\n            : `\n              &:active {\n                background: ${theme.surfacePressed};\n              }\n            `}\n        `}\n        {...props}\n      >\n        <div css=\"overflow: hidden;\">\n          <Label selectedIndex={selectedIndex} selectedLabel={selectedLabel} />\n        </div>\n        <IconDown\n          size=\"tiny\"\n          css={`\n            margin-left: ${1.5 * GU}px;\n            color: ${disabled\n              ? theme.disabledIcon\n              : closedWithChanges\n              ? theme.accent\n              : theme.surfaceIcon};\n          `}\n        />\n      </ButtonBase>\n      {measureWidth && (\n        <div\n          css={`\n            position: absolute;\n            top: -100vh;\n            left: -100vw;\n            opacity: 0;\n            visibility: hidden;\n          `}\n        >\n          <PopoverContent\n            refCallback={popoverRefCallback}\n            buttonWidth={buttonWidth}\n            header={header}\n            items={items}\n          />\n        </div>\n      )}\n      <Popover onClose={close} opener={buttonRef.current} visible={opened}>\n        <PopoverContent\n          buttonWidth={buttonWidth}\n          header={header}\n          items={items}\n          handleItemSelect={handleItemSelect}\n          selectedIndex={selectedIndex}\n        />\n      </Popover>\n    </Inside>\n  )\n})\n\nDropDown.propTypes = {\n  disabled: PropTypes.bool,\n  header: PropTypes.node,\n  items: PropTypes.arrayOf(PropTypes.node).isRequired,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.node,\n  renderLabel: PropTypes.func,\n  selected: PropTypes.number,\n  wide: PropTypes.bool,\n  width: PropTypes.string,\n\n  // deprecated\n  active: PropTypes.number,\n  label: PropTypes.string,\n}\n\nDropDown.defaultProps = {\n  placeholder: 'Select an item',\n  renderLabel: ({ selectedLabel }) => selectedLabel,\n  wide: false,\n}\n\nconst PopoverContent = React.memo(function PopoverContent({\n  refCallback,\n  buttonWidth,\n  header,\n  items,\n  handleItemSelect,\n  selectedIndex,\n}) {\n  const theme = useTheme()\n  return (\n    <div\n      css={`\n        min-width: ${buttonWidth}px;\n        color: ${theme.surfaceContentSecondary};\n      `}\n    >\n      {header && (\n        <div\n          css={`\n            padding: ${1.5 * GU}px ${2 * GU}px ${1.25 * GU}px;\n            ${textStyle('label2')};\n            ${unselectable};\n          `}\n        >\n          {header}\n        </div>\n      )}\n      <ul\n        ref={refCallback}\n        css={`\n          margin: 0;\n          padding: 0;\n          list-style: none;\n          width: 100%;\n        `}\n      >\n        <Inside name=\"DropDown:menu\">\n          {items.map((item, index) => {\n            return (\n              <Item\n                key={index}\n                index={index}\n                onSelect={handleItemSelect}\n                theme={theme}\n                item={item}\n                header={header}\n                length={items.length}\n                selected={selectedIndex}\n              />\n            )\n          })}\n        </Inside>\n      </ul>\n    </div>\n  )\n})\n\nPopoverContent.propTypes = {\n  refCallback: PropTypes.func.isRequired,\n  buttonWidth: PropTypes.number.isRequired,\n  header: PropTypes.node,\n  items: PropTypes.array.isRequired,\n  handleItemSelect: PropTypes.func.isRequired,\n  selectedIndex: PropTypes.number.isRequired,\n}\n\nPopoverContent.defaultProps = {\n  refCallback: () => null,\n  handleItemSelect: () => null,\n  selectedIndex: -1,\n}\n\nconst Item = React.memo(function Item({\n  header,\n  index,\n  item,\n  length,\n  onSelect,\n  selected,\n  theme,\n}) {\n  const handleClick = useCallback(() => {\n    onSelect(index)\n  }, [index, onSelect])\n\n  return (\n    <li>\n      <ButtonBase\n        onClick={handleClick}\n        css={`\n          width: 100%;\n          text-align: left;\n          padding: ${1.25 * GU}px ${2 * GU}px;\n          border-radius: 0;\n          color: ${theme.content};\n\n          ${textStyle('body2')};\n          ${\n            !header && index === 0 ? `border-top-left-radius: ${RADIUS}px;` : ''\n          }\n          ${\n            index === length - 1\n              ? `border-bottom-left-radius: ${RADIUS}px;`\n              : ''\n          }\n          ${\n            selected === index\n              ? `\n              border-left: 2px solid ${theme.accent};\n              background: ${theme.surfaceSelected};\n            `\n              : ''\n          }\n\n          &:active {\n            background: ${theme.surfacePressed};\n          }\n        `}\n      >\n        {item}\n      </ButtonBase>\n    </li>\n  )\n})\n\nItem.propTypes = {\n  header: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  item: PropTypes.node.isRequired,\n  length: PropTypes.number.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selected: PropTypes.number.isRequired,\n  theme: PropTypes.object.isRequired,\n}\n\nexport default DropDown\n"]},"metadata":{},"sourceType":"module"}