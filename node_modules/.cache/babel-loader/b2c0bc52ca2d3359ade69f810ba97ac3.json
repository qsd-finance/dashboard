{"ast":null,"code":"import { _ as _slicedToArray } from './slicedToArray-4e274c67.js';\nimport './unsupportedIterableToArray-137e449b.js';\nimport React, { useCallback, useState, useEffect, useContext, useRef } from 'react';\nimport './_commonjsHelpers-97e6d7b1.js';\nimport { P as PropTypes } from './index-097535f1.js';\nimport { _ as _defineProperty } from './defineProperty-a0480c32.js';\nimport './toConsumableArray-127424c2.js';\nimport _styled from 'styled-components';\nimport './getPrototypeOf-b96da1e1.js';\nimport './color.js';\nimport './components.js';\nimport './contains-component.js';\nimport { unselectable } from './css.js';\nimport './dayjs.min-e57fb69a.js';\nimport './date.js';\nimport './miscellaneous.js';\nimport { warn } from './environment.js';\nimport './font.js';\nimport './math-e6d0e93a.js';\nimport './characters.js';\nimport './format.js';\nimport { KEY_ESC } from './keycodes.js';\nimport './url.js';\nimport './web3.js';\nimport { GU } from './constants.js';\nimport './breakpoints.js';\nimport { springs } from './springs.js';\nimport { textStyle } from './text-styles.js';\nimport './theme-dark.js';\nimport './theme-light.js';\nimport { useTheme } from './Theme.js';\nimport { _ as _extends } from './extends-db4f0c26.js';\nimport { _ as _objectWithoutProperties } from './objectWithoutProperties-234758e1.js';\nimport { i } from './index-422d37c0.js';\nimport './isObject-3c6ec07e.js';\nimport { u as useViewport } from './Viewport-cc7debfb.js';\nimport './Layout.js';\nimport './FocusVisible.js';\nimport './ButtonBase.js';\nimport './IconPropTypes-aab7337d.js';\nimport './IconAddUser.js';\nimport './IconAlert.js';\nimport './IconAlignCenter.js';\nimport './IconAlignJustify.js';\nimport './IconAlignLeft.js';\nimport './IconAlignRight.js';\nimport './IconAragon.js';\nimport './IconArrowDown.js';\nimport './IconArrowLeft.js';\nimport './IconArrowRight.js';\nimport './IconArrowUp.js';\nimport './IconAtSign.js';\nimport './IconBlock.js';\nimport './IconBookmark.js';\nimport './IconCalendar.js';\nimport './IconCanvas.js';\nimport './IconCaution.js';\nimport './IconCenter.js';\nimport './IconChart.js';\nimport './IconChat.js';\nimport './IconCheck.js';\nimport './IconChip.js';\nimport './IconCircleCheck.js';\nimport './IconCircleMinus.js';\nimport './IconCirclePlus.js';\nimport './IconClock.js';\nimport './IconCloudDownload.js';\nimport './IconCloudUpload.js';\nimport './IconCoin.js';\nimport './IconConfiguration.js';\nimport './IconConnect.js';\nimport './IconConnection.js';\nimport './IconConsole.js';\nimport './IconCopy.js';\nimport IconClose from './IconCross.js';\nimport './IconDashedSquare.js';\nimport './IconDown.js';\nimport './IconDownload.js';\nimport './IconEdit.js';\nimport './IconEllipsis.js';\nimport './IconEnter.js';\nimport './IconEthereum.js';\nimport './IconExternal.js';\nimport './IconFile.js';\nimport './IconFilter.js';\nimport './IconFlag.js';\nimport './IconFolder.js';\nimport './IconGraph2.js';\nimport './IconGraph.js';\nimport './IconGrid.js';\nimport './IconGroup.js';\nimport './IconHash.js';\nimport './IconHeart.js';\nimport './IconHide.js';\nimport './IconHome.js';\nimport './IconImage.js';\nimport './IconInfo.js';\nimport './IconLabel.js';\nimport './IconLayers.js';\nimport './IconLeft.js';\nimport './IconLink.js';\nimport './IconLocation.js';\nimport './IconLock.js';\nimport './IconMail.js';\nimport './IconMaximize.js';\nimport './IconMenu.js';\nimport './IconMinimize.js';\nimport './IconMinus.js';\nimport './IconMove.js';\nimport './IconNoPicture.js';\nimport './IconPicture.js';\nimport './IconPlus.js';\nimport './IconPower.js';\nimport './IconPrint.js';\nimport './IconProhibited.js';\nimport './IconQuestion.js';\nimport './IconRefresh.js';\nimport './IconRemoveUser.js';\nimport './IconRight.js';\nimport './IconRotateLeft.js';\nimport './IconRotateRight.js';\nimport './IconSearch.js';\nimport './IconSettings.js';\nimport './IconShare.js';\nimport './IconSquareMinus.js';\nimport './IconSquarePlus.js';\nimport './IconSquare.js';\nimport './IconStarFilled.js';\nimport './IconStar.js';\nimport './IconSwap.js';\nimport './IconTarget.js';\nimport './IconToken.js';\nimport './IconTrash.js';\nimport './IconUnlock.js';\nimport './IconUp.js';\nimport './IconUpload.js';\nimport './IconUser.js';\nimport './IconView.js';\nimport './IconVote.js';\nimport './IconWallet.js';\nimport './IconWarning.js';\nimport './IconWorld.js';\nimport './IconWrite.js';\nimport './IconZoomIn.js';\nimport './IconZoomOut.js';\nimport './objectWithoutPropertiesLoose-9606ad13.js';\nimport 'react-dom';\nimport { e as extendedAnimated, T as Transition } from './web-a351a0a1.js';\nimport './Button.js';\nimport ButtonIcon from './ButtonIcon.js';\nimport './index-f754c2df.js';\nimport RootPortal from './RootPortal.js';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar CONTENT_PADDING = 3 * GU; // The closing position of the panel, on the right side of the viewport.\n// It takes into consideration the shadow of the panel.\n\nvar CLOSING_POSITION = 5 * GU;\nvar SidePanelContext = React.createContext(null);\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv\",\n  componentId: \"sc-1kjx6mk-0\"\n})([\"position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;pointer-events:\", \";overflow:hidden;\"], function (p) {\n  return p._css;\n});\n\nvar _StyledAnimatedDiv = _styled(extendedAnimated.div).withConfig({\n  displayName: \"SidePanel___StyledAnimatedDiv\",\n  componentId: \"sc-1kjx6mk-1\"\n})([\"position:absolute;top:0;left:0;right:0;bottom:0;background:\", \";\"], function (p) {\n  return p._css2;\n});\n\nvar _StyledHeader = _styled(\"header\").withConfig({\n  displayName: \"SidePanel___StyledHeader\",\n  componentId: \"sc-1kjx6mk-2\"\n})([\"display:flex;flex-direction:column;justify-content:center;flex-shrink:0;position:relative;height:\", \"px;padding-left:\", \"px;border-bottom:1px solid \", \";\", \";\"], function (p) {\n  return p._css3;\n}, CONTENT_PADDING, function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n});\n\nvar _StyledH = _styled(\"h1\").withConfig({\n  displayName: \"SidePanel___StyledH\",\n  componentId: \"sc-1kjx6mk-3\"\n})([\"color:\", \";\", \";\"], function (p) {\n  return p._css6;\n}, function (p) {\n  return p._css7;\n});\n\nvar _StyledButtonIcon = _styled(ButtonIcon).withConfig({\n  displayName: \"SidePanel___StyledButtonIcon\",\n  componentId: \"sc-1kjx6mk-4\"\n})([\"position:absolute;\", \"\"], function (p) {\n  return p._css8;\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv2\",\n  componentId: \"sc-1kjx6mk-5\"\n})([\"overflow-y:auto;height:100%;display:flex;flex-direction:column;\"]);\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv3\",\n  componentId: \"sc-1kjx6mk-6\"\n})([\"min-height:0;flex-grow:1;flex-shrink:0;display:flex;flex-direction:column;width:100%;padding-right:\", \"px;padding-left:\", \"px;padding-bottom:\", \"px;\"], CONTENT_PADDING, CONTENT_PADDING, CONTENT_PADDING);\n\nfunction SidePanel(_ref2) {\n  var blocking = _ref2.blocking,\n      children = _ref2.children,\n      opened = _ref2.opened,\n      onClose = _ref2.onClose,\n      onTransitionEnd = _ref2.onTransitionEnd,\n      title = _ref2.title;\n  var theme = useTheme();\n\n  var _useViewport = useViewport(),\n      below = _useViewport.below;\n\n  var compact = below('medium');\n  var close = useCallback(function () {\n    if (!blocking) {\n      onClose();\n    }\n  }, [blocking, onClose]);\n  var handleEscape = useCallback(function (event) {\n    if (event.keyCode === KEY_ESC && opened) {\n      close();\n    }\n  }, [opened, close]);\n\n  var _useState = useState(opened ? 'opened' : 'closed'),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      readyToFocus = _useState4[0],\n      setReadyToFocus = _useState4[1];\n\n  var handleTransitionRest = useCallback(function () {\n    onTransitionEnd(opened);\n    setStatus(opened ? 'opened' : 'closed');\n  }, [opened, onTransitionEnd]);\n  var handleTransitionStart = useCallback(function () {\n    setStatus(opened ? 'opening' : 'closing');\n  }, [opened]);\n  var handleTransitionFrame = useCallback(function (item, _, _ref3) {\n    var progress = _ref3.progress;\n\n    if (progress > 0.5 && !readyToFocus) {\n      setReadyToFocus(true);\n    } else if (progress < 0.5 && readyToFocus) {\n      setReadyToFocus(false);\n    }\n  }, [readyToFocus]);\n  var handleTransitionDestroyed = useCallback(function () {\n    setReadyToFocus(false);\n  }, []);\n  useEffect(function () {\n    document.addEventListener('keydown', handleEscape);\n    return function () {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [handleEscape]);\n  return /*#__PURE__*/React.createElement(RootPortal, null, /*#__PURE__*/React.createElement(i, {\n    name: \"SidePanel\"\n  }, /*#__PURE__*/React.createElement(Transition, {\n    items: opened,\n    config: _objectSpread({}, springs.lazy, {\n      precision: 0.001\n    }),\n    from: {\n      progress: 0\n    },\n    enter: {\n      progress: Number(opened)\n    },\n    leave: {\n      progress: 0\n    },\n    onRest: handleTransitionRest,\n    onStart: handleTransitionStart,\n    onFrame: handleTransitionFrame,\n    onDestroyed: handleTransitionDestroyed,\n    unique: true,\n    native: true\n  }, function (opened) {\n    return opened && function (_ref4) {\n      var progress = _ref4.progress;\n      return /*#__PURE__*/React.createElement(_StyledDiv, {\n        _css: status !== 'closing' ? 'auto' : 'none'\n      }, /*#__PURE__*/React.createElement(_StyledAnimatedDiv, {\n        onClick: close,\n        style: {\n          opacity: progress,\n          pointerEvents: status !== 'closing' ? 'auto' : 'none'\n        },\n        _css2: theme.overlay.alpha(0.9)\n      }), /*#__PURE__*/React.createElement(Panel, {\n        compact: compact,\n        style: {\n          transform: progress.interpolate(function (v) {\n            return \"\\n                          translate3d(\\n                            calc(\\n                              \".concat(100 * (1 - v), \"% +\\n                              \").concat(CLOSING_POSITION * (1 - v), \"px\\n                            ), 0, 0\\n                          )\\n                        \");\n          })\n        }\n      }, /*#__PURE__*/React.createElement(_StyledHeader, {\n        _css3: 8 * GU,\n        _css4: theme.border,\n        _css5: unselectable()\n      }, /*#__PURE__*/React.createElement(_StyledH, {\n        _css6: theme.surfaceContent,\n        _css7: textStyle('body1')\n      }, title), !blocking && /*#__PURE__*/React.createElement(_StyledButtonIcon, {\n        label: \"Close\",\n        onClick: close,\n        _css8: !compact ? \"\\n                              top: \".concat(2 * GU, \"px;\\n                              right: \").concat(2 * GU, \"px;\\n                            \") : \"\\n                              top: 0;\\n                              right: 0;\\n                              height: \".concat(8 * GU, \"px;\\n                              width: \").concat(8 * GU, \"px;\\n                            \")\n      }, /*#__PURE__*/React.createElement(IconClose, {\n        color: theme.surfaceIcon\n      }))), /*#__PURE__*/React.createElement(_StyledDiv2, null, /*#__PURE__*/React.createElement(_StyledDiv3, null, /*#__PURE__*/React.createElement(SidePanelContext.Provider, {\n        value: {\n          status: status,\n          readyToFocus: readyToFocus\n        }\n      }, children)))));\n    };\n  })));\n}\n\nSidePanel.propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  opened: PropTypes.bool,\n  onClose: PropTypes.func,\n  onTransitionEnd: PropTypes.func,\n  title: PropTypes.node.isRequired\n};\nSidePanel.defaultProps = {\n  opened: true,\n  blocking: false,\n  onClose: function onClose() {},\n  onTransitionEnd: function onTransitionEnd() {}\n};\n\nvar _StyledAnimatedAside = _styled(extendedAnimated.aside).withConfig({\n  displayName: \"SidePanel___StyledAnimatedAside\",\n  componentId: \"sc-1kjx6mk-7\"\n})([\"position:absolute;top:0;right:0;display:flex;flex-direction:column;width:100%;height:100%;background:\", \";box-shadow:-2px 0px 4px rgba(0,0,0,0.1);\", \"\"], function (p) {\n  return p._css9;\n}, function (p) {\n  return p._css10;\n});\n\nvar Panel = React.memo(function Panel(_ref5) {\n  var compact = _ref5.compact,\n      props = _objectWithoutProperties(_ref5, [\"compact\"]);\n\n  var theme = useTheme();\n  return /*#__PURE__*/React.createElement(_StyledAnimatedAside, _extends({}, props, {\n    _css9: theme.surface,\n    _css10: !compact ? 'max-width: 450px;' : ''\n  }));\n});\nPanel.propTypes = {\n  compact: PropTypes.bool\n};\n\nfunction useSidePanel() {\n  var value = useContext(SidePanelContext);\n\n  if (value === null) {\n    throw new Error('useSidePanel() was used outside of the SidePanel render tree, ' + 'which has to be declared at an upper level!');\n  }\n\n  return value;\n}\n\nfunction useSidePanelFocusOnReady(ref) {\n  var _useSidePanel = useSidePanel(),\n      readyToFocus = _useSidePanel.readyToFocus;\n\n  var fallbackRef = useRef();\n\n  var _ref = ref || fallbackRef;\n\n  useEffect(function () {\n    if (readyToFocus && _ref.current) {\n      if (_ref.current.focus) {\n        _ref.current.focus();\n      } else {\n        warn('useSidePanelFocusOnReady(): the focus() method wasn’t available on ' + 'the passed ref.');\n      }\n    }\n  }, [readyToFocus, _ref]);\n  return _ref;\n} // Used for spacing in SidePanelSplit and SidePanelSeparator\n\n\nSidePanel.HORIZONTAL_PADDING = CONTENT_PADDING;\nexport default SidePanel;\nexport { useSidePanel, useSidePanelFocusOnReady };","map":{"version":3,"sources":["../../src/components/SidePanel/SidePanel.js"],"names":["CONTENT_PADDING","CLOSING_POSITION","SidePanelContext","React","blocking","children","opened","onClose","onTransitionEnd","title","theme","useTheme","below","useViewport","compact","close","useCallback","handleEscape","event","status","setStatus","useState","readyToFocus","setReadyToFocus","handleTransitionRest","handleTransitionStart","handleTransitionFrame","progress","handleTransitionDestroyed","useEffect","document","springs","precision","Number","opacity","pointerEvents","transform","unselectable","textStyle","surfaceIcon","SidePanel","PropTypes","isRequired","Panel","props","bool","value","useContext","useSidePanel","fallbackRef","useRef","_ref","ref","warn"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition, animated } from 'react-spring'\nimport { Inside } from 'use-inside'\nimport ButtonIcon from '../Button/ButtonIcon'\nimport { IconClose } from '../../icons'\nimport { useViewport } from '../../providers/Viewport/Viewport'\nimport { GU, springs, textStyle } from '../../style'\nimport { useTheme } from '../../theme'\nimport { unselectable, KEY_ESC, warn } from '../../utils'\nimport RootPortal from '../RootPortal/RootPortal'\n\nconst CONTENT_PADDING = 3 * GU\n\n// The closing position of the panel, on the right side of the viewport.\n// It takes into consideration the shadow of the panel.\nconst CLOSING_POSITION = 5 * GU\n\nconst SidePanelContext = React.createContext(null)\n\nfunction SidePanel({\n  blocking,\n  children,\n  opened,\n  onClose,\n  onTransitionEnd,\n  title,\n}) {\n  const theme = useTheme()\n  const { below } = useViewport()\n  const compact = below('medium')\n\n  const close = useCallback(() => {\n    if (!blocking) {\n      onClose()\n    }\n  }, [blocking, onClose])\n\n  const handleEscape = useCallback(\n    event => {\n      if (event.keyCode === KEY_ESC && opened) {\n        close()\n      }\n    },\n    [opened, close]\n  )\n\n  const [status, setStatus] = useState(opened ? 'opened' : 'closed')\n  const [readyToFocus, setReadyToFocus] = useState(false)\n\n  const handleTransitionRest = useCallback(() => {\n    onTransitionEnd(opened)\n    setStatus(opened ? 'opened' : 'closed')\n  }, [opened, onTransitionEnd])\n\n  const handleTransitionStart = useCallback(() => {\n    setStatus(opened ? 'opening' : 'closing')\n  }, [opened])\n\n  const handleTransitionFrame = useCallback(\n    (item, _, { progress }) => {\n      if (progress > 0.5 && !readyToFocus) {\n        setReadyToFocus(true)\n      } else if (progress < 0.5 && readyToFocus) {\n        setReadyToFocus(false)\n      }\n    },\n    [readyToFocus]\n  )\n\n  const handleTransitionDestroyed = useCallback(() => {\n    setReadyToFocus(false)\n  }, [])\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleEscape)\n    return () => {\n      document.removeEventListener('keydown', handleEscape)\n    }\n  }, [handleEscape])\n\n  return (\n    <RootPortal>\n      <Inside name=\"SidePanel\">\n        <Transition\n          items={opened}\n          config={{ ...springs.lazy, precision: 0.001 }}\n          from={{ progress: 0 }}\n          enter={{ progress: Number(opened) }}\n          leave={{ progress: 0 }}\n          onRest={handleTransitionRest}\n          onStart={handleTransitionStart}\n          onFrame={handleTransitionFrame}\n          onDestroyed={handleTransitionDestroyed}\n          unique\n          native\n        >\n          {opened =>\n            opened &&\n            (({ progress }) => (\n              <div\n                css={`\n                  position: absolute;\n                  z-index: 1;\n                  top: 0;\n                  left: 0;\n                  right: 0;\n                  bottom: 0;\n                  pointer-events: ${status !== 'closing' ? 'auto' : 'none'};\n                  overflow: hidden;\n                `}\n              >\n                <animated.div\n                  onClick={close}\n                  style={{\n                    opacity: progress,\n                    pointerEvents: status !== 'closing' ? 'auto' : 'none',\n                  }}\n                  css={`\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: ${theme.overlay.alpha(0.9)};\n                  `}\n                />\n                <Panel\n                  compact={compact}\n                  style={{\n                    transform: progress.interpolate(\n                      v =>\n                        `\n                          translate3d(\n                            calc(\n                              ${100 * (1 - v)}% +\n                              ${CLOSING_POSITION * (1 - v)}px\n                            ), 0, 0\n                          )\n                        `\n                    ),\n                  }}\n                >\n                  <header\n                    css={`\n                      display: flex;\n                      flex-direction: column;\n                      justify-content: center;\n                      flex-shrink: 0;\n                      position: relative;\n                      height: ${8 * GU}px;\n                      padding-left: ${CONTENT_PADDING}px;\n                      border-bottom: 1px solid ${theme.border};\n                      ${unselectable()};\n                    `}\n                  >\n                    <h1\n                      css={`\n                        color: ${theme.surfaceContent};\n                        ${textStyle('body1')};\n                      `}\n                    >\n                      {title}\n                    </h1>\n                    {!blocking && (\n                      <ButtonIcon\n                        label=\"Close\"\n                        onClick={close}\n                        css={`\n                          position: absolute;\n                          ${!compact\n                            ? `\n                              top: ${2 * GU}px;\n                              right: ${2 * GU}px;\n                            `\n                            : `\n                              top: 0;\n                              right: 0;\n                              height: ${8 * GU}px;\n                              width: ${8 * GU}px;\n                            `}\n                        `}\n                      >\n                        <IconClose color={theme.surfaceIcon} />\n                      </ButtonIcon>\n                    )}\n                  </header>\n                  <div\n                    css={`\n                      overflow-y: auto;\n                      height: 100%;\n                      display: flex;\n                      flex-direction: column;\n                    `}\n                  >\n                    <div\n                      css={`\n                        min-height: 0;\n                        flex-grow: 1;\n                        flex-shrink: 0;\n                        display: flex;\n                        flex-direction: column;\n                        width: 100%;\n                        padding-right: ${CONTENT_PADDING}px;\n                        padding-left: ${CONTENT_PADDING}px;\n                        padding-bottom: ${CONTENT_PADDING}px;\n                      `}\n                    >\n                      <SidePanelContext.Provider\n                        value={{ status, readyToFocus }}\n                      >\n                        {children}\n                      </SidePanelContext.Provider>\n                    </div>\n                  </div>\n                </Panel>\n              </div>\n            ))\n          }\n        </Transition>\n      </Inside>\n    </RootPortal>\n  )\n}\n\nSidePanel.propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  opened: PropTypes.bool,\n  onClose: PropTypes.func,\n  onTransitionEnd: PropTypes.func,\n  title: PropTypes.node.isRequired,\n}\n\nSidePanel.defaultProps = {\n  opened: true,\n  blocking: false,\n  onClose: () => {},\n  onTransitionEnd: () => {},\n}\n\nconst Panel = React.memo(function Panel({ compact, ...props }) {\n  const theme = useTheme()\n  return (\n    <animated.aside\n      css={`\n        position: absolute;\n        top: 0;\n        right: 0;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        background: ${theme.surface};\n        box-shadow: -2px 0px 4px rgba(0, 0, 0, 0.1);\n        ${!compact ? 'max-width: 450px;' : ''}\n      `}\n      {...props}\n    />\n  )\n})\n\nPanel.propTypes = {\n  compact: PropTypes.bool,\n}\n\nfunction useSidePanel() {\n  const value = useContext(SidePanelContext)\n  if (value === null) {\n    throw new Error(\n      'useSidePanel() was used outside of the SidePanel render tree, ' +\n        'which has to be declared at an upper level!'\n    )\n  }\n  return value\n}\n\nfunction useSidePanelFocusOnReady(ref) {\n  const { readyToFocus } = useSidePanel()\n  const fallbackRef = useRef()\n\n  const _ref = ref || fallbackRef\n\n  useEffect(() => {\n    if (readyToFocus && _ref.current) {\n      if (_ref.current.focus) {\n        _ref.current.focus()\n      } else {\n        warn(\n          'useSidePanelFocusOnReady(): the focus() method wasn’t available on ' +\n            'the passed ref.'\n        )\n      }\n    }\n  }, [readyToFocus, _ref])\n\n  return _ref\n}\n\n// Used for spacing in SidePanelSplit and SidePanelSeparator\nSidePanel.HORIZONTAL_PADDING = CONTENT_PADDING\n\nexport { useSidePanel, useSidePanelFocusOnReady }\nexport default SidePanel\n"]},"metadata":{},"sourceType":"module"}