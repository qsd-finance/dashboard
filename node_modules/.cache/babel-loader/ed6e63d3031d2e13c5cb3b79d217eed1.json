{"ast":null,"code":"import React from 'react';\nimport { P as PropTypes } from './index-097535f1.js';\nimport { _ as _defineProperty } from './defineProperty-a0480c32.js';\nimport { _ as _inherits, a as _createClass, b as _classCallCheck, e as _assertThisInitialized, c as _getPrototypeOf, d as _possibleConstructorReturn } from './getPrototypeOf-b96da1e1.js';\nimport { g as getDisplayName } from './getDisplayName-d5fc7707.js';\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n} // For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\n\nvar Redraw = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Redraw, _React$PureComponent);\n\n  var _super = _createSuper(Redraw);\n\n  function Redraw() {\n    var _this;\n\n    _classCallCheck(this, Redraw);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      lastDraw: -1\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"draw\", function () {\n      _this.raf = requestAnimationFrame(_this.draw);\n      var interval = _this.props.interval;\n      var lastDraw = _this.state.lastDraw;\n      var now = Date.now();\n      var delta = now - lastDraw;\n\n      if (lastDraw === -1 || delta > interval) {\n        _this.setState({\n          lastDraw: Math.round(now / interval) * interval\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Redraw, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.raf = null;\n      this.draw();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.raf && cancelAnimationFrame(this.raf);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children();\n    }\n  }]);\n\n  return Redraw;\n}(React.PureComponent);\n\n_defineProperty(Redraw, \"propTypes\", {\n  interval: PropTypes.number,\n  children: PropTypes.func.isRequired\n});\n\n_defineProperty(Redraw, \"defaultProps\", {\n  interval: 1000\n});\n\nvar hocWrap = function hocWrap(Component, interval) {\n  var HOC = function HOC(props) {\n    return /*#__PURE__*/React.createElement(Redraw, {\n      interval: interval\n    }, function () {\n      return /*#__PURE__*/React.createElement(Component, props);\n    });\n  };\n\n  HOC.displayName = \"Redraw(\".concat(getDisplayName(Component), \")\");\n  return HOC;\n};\n\nRedraw.hocWrap = hocWrap;\nexport { Redraw as R };","map":{"version":3,"sources":["../../src/providers/Redraw/Redraw.js"],"names":["Redraw","React","PureComponent","interval","PropTypes","children","isRequired","lastDraw","cancelAnimationFrame","requestAnimationFrame","now","Date","delta","Math","hocWrap","HOC","getDisplayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAKA;AACA;;;IAEMA,MAAAA,GAAAA,aAAAA,UAAAA,oBAAAA,EAAAA;;;;;;;;;;;;;;;;4DAQI;AACNO,MAAAA,QAAQ,EAAE,CAAC;AADL,K;;2DAUD,YAAM;AACX,MAAA,KAAA,CAAA,GAAA,GAAWE,qBAAqB,CAAC,KAAA,CAAjC,IAAgC,CAAhC;AADW,UAGHN,QAHG,GAGU,KAAA,CAHV,KAGU,CAHV,QAAA;AAAA,UAIHI,QAJG,GAIU,KAAA,CAJV,KAIU,CAJV,QAAA;AAKX,UAAMG,GAAG,GAAGC,IAAI,CAAhB,GAAYA,EAAZ;AACA,UAAMC,KAAK,GAAGF,GAAG,GAAjB,QAAA;;AAEA,UAAIH,QAAQ,KAAK,CAAbA,CAAAA,IAAmBK,KAAK,GAA5B,QAAA,EAAyC;AACvC,QAAA,KAAA,CAAA,QAAA,CAAc;AACZL,UAAAA,QAAQ,EAAEM,IAAI,CAAJA,KAAAA,CAAWH,GAAG,GAAdG,QAAAA,IAA6BV;AAD3B,SAAd;AAGD;AACF,K;;;;;;;wCApBmB;AAClB,WAAA,GAAA,GAAA,IAAA;AACA,WAAA,IAAA;AACD;;;2CACsB;AACrB,WAAA,GAAA,IAAYK,oBAAoB,CAAC,KAAjC,GAAgC,CAAhC;AACD;;;6BAeQ;AACP,aAAO,KAAA,KAAA,CAAP,QAAO,EAAP;AACD;;;;CAlCGR,CAAeC,KAAK,CAACC,aAArBF,C;;gBAAAA,M,EAAAA,W,EACe;AACjBG,EAAAA,QAAQ,EAAEC,SAAS,CADF,MAAA;AAEjBC,EAAAA,QAAQ,EAAED,SAAS,CAATA,IAAAA,CAAeE;AAFR,C;;gBADfN,M,EAAAA,c,EAKkB;AACpBG,EAAAA,QAAQ,EAAE;AADU,C;;AAgCxB,IAAMW,OAAO,GAAG,SAAVA,OAAU,CAAA,SAAA,EAAA,QAAA,EAAyB;AACvC,MAAMC,GAAG,GAAG,SAANA,GAAM,CAAA,KAAA,EAAK;AAAA,WAAA,aACf,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAQ,MAAA,QAAQ,EAAEZ;AAAlB,KAAA,EAA6B,YAAA;AAAA,aAAA,aAAM,KAAA,CAAA,aAAA,CAAA,SAAA,EAAN,KAAM,CAAN;AADd,KACf,CADe;AAAjB,GAAA;;AAGAY,EAAAA,GAAG,CAAHA,WAAAA,GAAAA,UAAAA,MAAAA,CAA4BC,cAAc,CAA1CD,SAA0C,CAA1CA,EAAAA,GAAAA,CAAAA;AACA,SAAA,GAAA;AALF,CAAA;;AAQAf,MAAM,CAANA,OAAAA,GAAAA,OAAAA","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport getDisplayName from 'react-display-name'\n\n// Render prop component and HOC for re-rendering.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\nclass Redraw extends React.PureComponent {\n  static propTypes = {\n    interval: PropTypes.number,\n    children: PropTypes.func.isRequired,\n  }\n  static defaultProps = {\n    interval: 1000,\n  }\n  state = {\n    lastDraw: -1,\n  }\n  componentDidMount() {\n    this.raf = null\n    this.draw()\n  }\n  componentWillUnmount() {\n    this.raf && cancelAnimationFrame(this.raf)\n  }\n  draw = () => {\n    this.raf = requestAnimationFrame(this.draw)\n\n    const { interval } = this.props\n    const { lastDraw } = this.state\n    const now = Date.now()\n    const delta = now - lastDraw\n\n    if (lastDraw === -1 || delta > interval) {\n      this.setState({\n        lastDraw: Math.round(now / interval) * interval,\n      })\n    }\n  }\n  render() {\n    return this.props.children()\n  }\n}\n\nconst hocWrap = (Component, interval) => {\n  const HOC = props => (\n    <Redraw interval={interval}>{() => <Component {...props} />}</Redraw>\n  )\n  HOC.displayName = `Redraw(${getDisplayName(Component)})`\n  return HOC\n}\n\nRedraw.hocWrap = hocWrap\n\nexport { Redraw, hocWrap }\nexport default Redraw\n"]},"metadata":{},"sourceType":"module"}