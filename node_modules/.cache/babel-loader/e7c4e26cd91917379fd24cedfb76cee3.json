{"ast":null,"code":"import _regeneratorRuntime from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Header,Layout}from'@aragon/ui';import{getEpoch,getEpochTime}from'../../utils/infura';import{QSDS}from\"../../constants/tokens\";import AdvanceEpoch from'./AdvanceEpoch';import EpochPageHeader from\"./Header\";import IconHeader from\"../common/IconHeader\";function EpochDetail(_ref){var user=_ref.user;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),epoch=_useState2[0],setEpoch=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),epochTime=_useState4[0],setEpochTime=_useState4[1];useEffect(function(){var isCancelled=false;function updateUserInfo(){return _updateUserInfo.apply(this,arguments);}function _updateUserInfo(){_updateUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,epochStr,epochTimeStr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getEpoch(QSDS.addr),getEpochTime(QSDS.addr)]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);epochStr=_yield$Promise$all2[0];epochTimeStr=_yield$Promise$all2[1];if(!isCancelled){setEpoch(parseInt(epochStr,10));setEpochTime(parseInt(epochTimeStr,10));}case 7:case\"end\":return _context.stop();}}},_callee);}));return _updateUserInfo.apply(this,arguments);}updateUserInfo();var id=setInterval(updateUserInfo,15000);// eslint-disable-next-line consistent-return\nreturn function(){isCancelled=true;clearInterval(id);};},[user]);return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(IconHeader,{icon:/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-stream\"}),text:\"Epoch\"}),/*#__PURE__*/React.createElement(EpochPageHeader,{epoch:epoch,epochTime:epochTime}),/*#__PURE__*/React.createElement(Header,{primary:\"Advance Epoch\"}),/*#__PURE__*/React.createElement(AdvanceEpoch,{user:user,epoch:epoch,epochTime:epochTime}));}export default EpochDetail;","map":{"version":3,"sources":["/Users/J/crypto/dashboard/src/components/EpochDetail/index.tsx"],"names":["React","useState","useEffect","Header","Layout","getEpoch","getEpochTime","QSDS","AdvanceEpoch","EpochPageHeader","IconHeader","EpochDetail","user","epoch","setEpoch","epochTime","setEpochTime","isCancelled","updateUserInfo","Promise","all","addr","epochStr","epochTimeStr","parseInt","id","setInterval","clearInterval"],"mappings":"6aAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,MAAjB,KAA+B,YAA/B,CAEA,OAAQC,QAAR,CAAkBC,YAAlB,KACO,oBADP,CAEA,OAAQC,IAAR,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,eAAP,KAA4B,UAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CAEA,QAASC,CAAAA,WAAT,MAA+C,IAAxBC,CAAAA,IAAwB,MAAxBA,IAAwB,eAEnBX,QAAQ,CAAC,CAAD,CAFW,wCAEtCY,KAFsC,eAE/BC,QAF+B,8BAGXb,QAAQ,CAAC,CAAD,CAHG,yCAGtCc,SAHsC,eAG3BC,YAH2B,eAI7Cd,SAAS,CAAC,UAAM,CACd,GAAIe,CAAAA,WAAW,CAAG,KAAlB,CADc,QAGCC,CAAAA,cAHD,oJAGd,0NACyCC,CAAAA,OAAO,CAACC,GAAR,CAAY,CACjDf,QAAQ,CAACE,IAAI,CAACc,IAAN,CADyC,CAEjDf,YAAY,CAACC,IAAI,CAACc,IAAN,CAFqC,CAAZ,CADzC,kGACSC,QADT,wBACmBC,YADnB,wBAME,GAAI,CAACN,WAAL,CAAkB,CAChBH,QAAQ,CAACU,QAAQ,CAACF,QAAD,CAAW,EAAX,CAAT,CAAR,CACAN,YAAY,CAACQ,QAAQ,CAACD,YAAD,CAAe,EAAf,CAAT,CAAZ,CACD,CATH,sDAHc,iDAcdL,cAAc,GACd,GAAMO,CAAAA,EAAE,CAAGC,WAAW,CAACR,cAAD,CAAiB,KAAjB,CAAtB,CAEA;AACA,MAAO,WAAM,CACXD,WAAW,CAAG,IAAd,CACAU,aAAa,CAACF,EAAD,CAAb,CACD,CAHD,CAID,CAtBQ,CAsBN,CAACb,IAAD,CAtBM,CAAT,CAwBA,mBACE,oBAAC,MAAD,mBACE,oBAAC,UAAD,EAAY,IAAI,cAAE,yBAAG,SAAS,CAAC,eAAb,EAAlB,CAAkD,IAAI,CAAC,OAAvD,EADF,cAGE,oBAAC,eAAD,EACE,KAAK,CAAEC,KADT,CAEE,SAAS,CAAEE,SAFb,EAHF,cAQE,oBAAC,MAAD,EAAQ,OAAO,CAAC,eAAhB,EARF,cAUE,oBAAC,YAAD,EACE,IAAI,CAAEH,IADR,CAEE,KAAK,CAAEC,KAFT,CAGE,SAAS,CAAEE,SAHb,EAVF,CADF,CAkBD,CAED,cAAeJ,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Header, Layout } from '@aragon/ui';\n\nimport {getEpoch, getEpochTime,\n} from '../../utils/infura';\nimport {QSDS} from \"../../constants/tokens\";\nimport AdvanceEpoch from './AdvanceEpoch';\nimport EpochPageHeader from \"./Header\";\nimport IconHeader from \"../common/IconHeader\";\n\nfunction EpochDetail({ user }: {user: string}) {\n\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [epochStr, epochTimeStr] = await Promise.all([\n        getEpoch(QSDS.addr),\n        getEpochTime(QSDS.addr),\n      ]);\n\n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(parseInt(epochTimeStr, 10));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <Layout>\n      <IconHeader icon={<i className=\"fas fa-stream\"/>} text=\"Epoch\"/>\n\n      <EpochPageHeader\n        epoch={epoch}\n        epochTime={epochTime}\n      />\n\n      <Header primary=\"Advance Epoch\" />\n\n      <AdvanceEpoch\n        user={user}\n        epoch={epoch}\n        epochTime={epochTime}\n      />\n    </Layout>\n  );\n}\n\nexport default EpochDetail;\n"]},"metadata":{},"sourceType":"module"}