{"ast":null,"code":"import _regeneratorRuntime from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/J/crypto/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Layout,useTheme}from'@aragon/ui';import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{TreasuryAddress}from'../../constants/contracts';import{QSD,QSDS,UNI}from'../../constants/tokens';import{epochformattedRemaining}from'../../utils/calculation';import{getBalanceBonded,getBalanceOfStaged,getDaoIsBootstrapping,getEpoch,getExpansionAmount,getInstantaneousQSDPrice,getLPBondedLiquidity,getLPStagedLiquidity,getPoolBalanceOfBonded,getPoolBalanceOfStaged,getPoolTotalBonded,getPoolTotalStaged,getTokenBalance,getTokenTotalSupply,getTotalBonded,getTotalStaged,getTWAPPrice,getUserLPBonded,getUserLPStaged,getUserLPWallet}from'../../utils/infura';import{formatBN,toTokenUnitsBN}from'../../utils/number';import{getPoolBondingAddress,getPoolLPAddress}from'../../utils/pool';import{advance}from'../../utils/web3';import{Row,Section,Tile,TopBorderSection}from'../common';function Tools(_ref){var user=_ref.user;var theme=useTheme();var _useParams=useParams(),override=_useParams.override;if(override){user=override;}var _useState=useState(0),_useState2=_slicedToArray(_useState,2),daoEpoch=_useState2[0],setDaoEpoch=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),estimatedEpoch=_useState4[0],setEstimatedEpoch=_useState4[1];var _useState5=useState('00:00:00'),_useState6=_slicedToArray(_useState5,2),nextEpochIn=_useState6[0],setNextEpochIn=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),totalSupply=_useState8[0],setTotalSupply=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),qsdPrice=_useState10[0],setQSDPrice=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),twapPrice=_useState12[0],setTwapPrice=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),expansionAmount=_useState14[0],setExpansionAmount=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),treasuryQSDAmount=_useState16[0],setTreasuryQSDAmount=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),qsdBondedLiquidity=_useState18[0],setQSDBondedLiquidity=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),daiBondedLiquidity=_useState20[0],setDAIBondedLiquidity=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),qsdStagedLiquidity=_useState22[0],setQSDStagedLiquidity=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),daiStagedLiquidity=_useState24[0],setDAIStagedLiquidity=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),daoBonded=_useState26[0],setDaoBonded=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),daoStaged=_useState28[0],setDaoStaged=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),lpBonded=_useState30[0],setLPBonded=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),lpStaged=_useState32[0],setLPStaged=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),userLpBonded=_useState34[0],setUserLpBonded=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),userLpStaged=_useState36[0],setUserLpStaged=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),userDaoBonded=_useState38[0],setUserDaoBonded=_useState38[1];var _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),userDaoStaged=_useState40[0],setUserDaoStaged=_useState40[1];var _useState41=useState(null),_useState42=_slicedToArray(_useState41,2),userQsdBal=_useState42[0],setUserQsdBal=_useState42[1];var _useState43=useState(null),_useState44=_slicedToArray(_useState43,2),userUniBal=_useState44[0],setUserUniBal=_useState44[1];var _useState45=useState(null),_useState46=_slicedToArray(_useState45,2),userQsdWalletLiquidity=_useState46[0],setUserQSDWalletLiquidity=_useState46[1];var _useState47=useState(null),_useState48=_slicedToArray(_useState47,2),userDaiWalletLiquidity=_useState48[0],setUserDAIWalletLiquidity=_useState48[1];var _useState49=useState(null),_useState50=_slicedToArray(_useState49,2),userQsdBondedLiquidity=_useState50[0],setUserQSDBondedLiquidity=_useState50[1];var _useState51=useState(null),_useState52=_slicedToArray(_useState51,2),userDaiBondedLiquidity=_useState52[0],setUserDAIBondedLiquidity=_useState52[1];var _useState53=useState(null),_useState54=_slicedToArray(_useState53,2),userQsdStagedLiquidity=_useState54[0],setUserQSDStagedLiquidity=_useState54[1];var _useState55=useState(null),_useState56=_slicedToArray(_useState55,2),userDaiStagedLiquidity=_useState56[0],setUserDAIStagedLiquidity=_useState56[1];useEffect(function(){var f=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var poolLP,poolBonding,_yield$Promise$all,_yield$Promise$all2,spot,twap,supply,bondedLiquidity,stagedLiquidity,lpBonded,lpStaged,daoBonded,daoStaged,bondingBonded,bondingStaged,expansionAmount,bootstrapping,daoE,treasuryQSD;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPoolLPAddress();case 2:poolLP=_context.sent;_context.next=5;return getPoolBondingAddress();case 5:poolBonding=_context.sent;_context.next=8;return Promise.all([getInstantaneousQSDPrice(),getTWAPPrice(),getTokenTotalSupply(QSD.addr),getLPBondedLiquidity(),getLPStagedLiquidity(),getPoolTotalBonded(poolLP),getPoolTotalStaged(poolLP),getTotalBonded(QSDS.addr),getTotalStaged(QSDS.addr),getPoolTotalBonded(poolBonding),getPoolTotalStaged(poolBonding),getExpansionAmount(),getDaoIsBootstrapping(),getEpoch(QSDS.addr),getTokenBalance(QSD.addr,TreasuryAddress)]);case 8:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,15);spot=_yield$Promise$all2[0];twap=_yield$Promise$all2[1];supply=_yield$Promise$all2[2];bondedLiquidity=_yield$Promise$all2[3];stagedLiquidity=_yield$Promise$all2[4];lpBonded=_yield$Promise$all2[5];lpStaged=_yield$Promise$all2[6];daoBonded=_yield$Promise$all2[7];daoStaged=_yield$Promise$all2[8];bondingBonded=_yield$Promise$all2[9];bondingStaged=_yield$Promise$all2[10];expansionAmount=_yield$Promise$all2[11];bootstrapping=_yield$Promise$all2[12];daoE=_yield$Promise$all2[13];treasuryQSD=_yield$Promise$all2[14];setTwapPrice(twap);setTotalSupply(toTokenUnitsBN(supply,18));setQSDPrice(toTokenUnitsBN(spot,18));setQSDStagedLiquidity(stagedLiquidity.qsd);setDAIStagedLiquidity(stagedLiquidity.dai);setQSDBondedLiquidity(bondedLiquidity.qsd);setDAIBondedLiquidity(bondedLiquidity.dai);setLPBonded(toTokenUnitsBN(lpBonded,18));setLPStaged(toTokenUnitsBN(lpStaged,18));setDaoEpoch(parseInt(daoE,10));setTreasuryQSDAmount(toTokenUnitsBN(treasuryQSD,QSD.decimals));// If is bootstrapping, then bonding will be referencing dao\n// otherwise it'll be referencing bonding\nif(bootstrapping){setDaoBonded(toTokenUnitsBN(daoBonded,18));setDaoStaged(toTokenUnitsBN(daoStaged,18));}else{setDaoBonded(toTokenUnitsBN(bondingBonded,18));setDaoStaged(toTokenUnitsBN(bondingStaged,18));}setExpansionAmount(expansionAmount);case 38:case\"end\":return _context.stop();}}},_callee);}));return function f(){return _ref2.apply(this,arguments);};}();var g=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var poolLP,_yield$Promise$all3,_yield$Promise$all4,userQSDBal,userUniBal,userLpBonded,userLpStaged,userDaoBonded,userDaoStaged,walletLiquidity,stagedLiquidity,bondedLiquidity;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(user){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return getPoolLPAddress();case 4:poolLP=_context2.sent;_context2.next=7;return Promise.all([getTokenBalance(QSD.addr,user),getTokenBalance(UNI.addr,user),getPoolBalanceOfBonded(poolLP,user),getPoolBalanceOfStaged(poolLP,user),getBalanceBonded(QSDS.addr,user),getBalanceOfStaged(QSDS.addr,user),getUserLPWallet(user),getUserLPStaged(user),getUserLPBonded(user)]);case 7:_yield$Promise$all3=_context2.sent;_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,9);userQSDBal=_yield$Promise$all4[0];userUniBal=_yield$Promise$all4[1];userLpBonded=_yield$Promise$all4[2];userLpStaged=_yield$Promise$all4[3];userDaoBonded=_yield$Promise$all4[4];userDaoStaged=_yield$Promise$all4[5];walletLiquidity=_yield$Promise$all4[6];stagedLiquidity=_yield$Promise$all4[7];bondedLiquidity=_yield$Promise$all4[8];setUserQsdBal(toTokenUnitsBN(userQSDBal,18));setUserUniBal(toTokenUnitsBN(userUniBal,18));setUserLpBonded(toTokenUnitsBN(userLpBonded,18));setUserLpStaged(toTokenUnitsBN(userLpStaged,18));setUserDaoBonded(toTokenUnitsBN(userDaoBonded,18));setUserDaoStaged(toTokenUnitsBN(userDaoStaged,18));setUserQSDWalletLiquidity(walletLiquidity.qsd);setUserDAIWalletLiquidity(walletLiquidity.dai);setUserQSDStagedLiquidity(stagedLiquidity.qsd);setUserDAIStagedLiquidity(stagedLiquidity.dai);setUserQSDBondedLiquidity(bondedLiquidity.qsd);setUserDAIBondedLiquidity(bondedLiquidity.dai);case 30:case\"end\":return _context2.stop();}}},_callee2);}));return function g(){return _ref3.apply(this,arguments);};}();function updateEpoch(){return _updateEpoch.apply(this,arguments);}function _updateEpoch(){_updateEpoch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var e;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e=epochformattedRemaining();setEstimatedEpoch(parseInt(e.split('-')[0],10));setNextEpochIn(e.split('-')[1]);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _updateEpoch.apply(this,arguments);}setInterval(updateEpoch,1000);f();g();},[user]);var toFloat=function toFloat(a){return parseFloat(formatBN(a,2).split(',').join(''));};var lpBondedPercentage='...';var lpStagedPercentage='...';var daoBondedPercentage='...';var daoStagedPercentage='...';var qsdMarketCap='...';var daoAPR='...';var daoExpansionYield='...';var lpExpansionYield='...';var lpAPR='...';var qsdBondedPrice='$...';var qsdStagedPrice='$...';var lpBondedPrice='$...';var lpStagedPrice='$...';var userQSDWalletPrice='$0';var userQSDBondedPrice='$0';var userQSDStagedPrice='$0';var userLPWalletPrice='$0';var userLPBondedPrice='$0';var userLPStagedPrice='$0';var treasuryUSDValue='$0';// Define number formatting\nvar options={minimumFractionDigits:0,maximumFractionDigits:2};var numberFormat=new Intl.NumberFormat('en-US',options);// Calculate prices\nif(qsdPrice&&treasuryQSDAmount){var totalDAI=toFloat(treasuryQSDAmount)*toFloat(qsdPrice);treasuryUSDValue='$'+numberFormat.format(totalDAI);}if(qsdPrice&&qsdStagedLiquidity&&daiStagedLiquidity){var _totalDAI=qsdStagedLiquidity*toFloat(qsdPrice)+daiStagedLiquidity;lpStagedPrice='$'+numberFormat.format(_totalDAI);}if(qsdPrice&&qsdBondedLiquidity&&daiBondedLiquidity){var _totalDAI2=qsdBondedLiquidity*toFloat(qsdPrice)+daiBondedLiquidity;lpBondedPrice='$'+numberFormat.format(_totalDAI2);}if(qsdPrice&&daoBonded){var _totalDAI3=toFloat(daoBonded)*toFloat(qsdPrice);qsdBondedPrice='$'+numberFormat.format(_totalDAI3);}if(qsdPrice&&daoStaged){var _totalDAI4=toFloat(daoStaged)*toFloat(qsdPrice);qsdStagedPrice='$'+numberFormat.format(_totalDAI4);}if(qsdPrice&&userQsdWalletLiquidity&&userDaiWalletLiquidity){var _totalDAI5=userQsdWalletLiquidity*toFloat(qsdPrice)+userDaiWalletLiquidity;userLPWalletPrice='$'+numberFormat.format(_totalDAI5);}if(qsdPrice&&userQsdStagedLiquidity&&userDaiStagedLiquidity){var _totalDAI6=userQsdStagedLiquidity*toFloat(qsdPrice)+userDaiStagedLiquidity;userLPStagedPrice='$'+numberFormat.format(_totalDAI6);}if(qsdPrice&&userQsdBondedLiquidity&&userDaiBondedLiquidity){var _totalDAI7=userQsdBondedLiquidity*toFloat(qsdPrice)+userDaiBondedLiquidity;userLPBondedPrice='$'+numberFormat.format(_totalDAI7);}if(qsdPrice&&userQsdBal){var _totalDAI8=toFloat(userQsdBal)*toFloat(qsdPrice);userQSDWalletPrice='$'+numberFormat.format(_totalDAI8);}if(qsdPrice&&userDaoBonded){var _totalDAI9=toFloat(userDaoBonded)*toFloat(qsdPrice);userQSDBondedPrice='$'+numberFormat.format(_totalDAI9);}if(qsdPrice&&userDaoStaged){var _totalDAI10=toFloat(userDaoStaged)*toFloat(qsdPrice);userQSDStagedPrice='$'+numberFormat.format(_totalDAI10);}// Calculate LP APR (4 hrs)\nif(qsdPrice&&qsdBondedLiquidity&&daiBondedLiquidity&&expansionAmount){var _totalDAI11=qsdBondedLiquidity*toFloat(qsdPrice)+daiBondedLiquidity;var daiToAdd=expansionAmount/2*toFloat(qsdPrice);var lpYield=daiToAdd/_totalDAI11*100;lpExpansionYield=Intl.NumberFormat('en',{maximumFractionDigits:0,minimumFractionDigits:0}).format(lpYield)+'%';lpAPR=Intl.NumberFormat('en',{maximumFractionDigits:0,minimumFractionDigits:0}).format(lpYield*6*365)+'%';}// Calculate DAO APR (4 hrs)\nif(qsdPrice&&daoBonded&&expansionAmount){var totalQSD=toFloat(daoBonded);var qsdToAdd=expansionAmount/2;var daoYield=qsdToAdd/totalQSD*100;daoExpansionYield=Intl.NumberFormat('en',{maximumFractionDigits:0,minimumFractionDigits:0}).format(daoYield)+'%';daoAPR=Intl.NumberFormat('en',{maximumFractionDigits:0,minimumFractionDigits:0}).format(daoYield*6*365)+'%';}if(qsdPrice&&qsdBondedLiquidity)if(lpBonded&&lpStaged){var lpBondedF=toFloat(lpBonded);var lpStagedF=toFloat(lpStaged);var total=lpBondedF+lpStagedF;if(total>0){lpBondedPercentage=(lpBondedF/total*100).toFixed(2)+'%';lpStagedPercentage=(lpStagedF/total*100).toFixed(2)+'%';}}if(daoBonded&&daoStaged){var daoBondedF=toFloat(daoBonded);var daoStagedF=toFloat(daoStaged);var _total=daoBondedF+daoStagedF;if(_total>0){daoBondedPercentage=(daoBondedF/_total*100).toFixed(2)+'%';daoStagedPercentage=(daoStagedF/_total*100).toFixed(2)+'%';}}if(qsdPrice&&totalSupply){var qsdMarketCapNumber=0;qsdMarketCapNumber=toFloat(qsdPrice)*toFloat(totalSupply);qsdMarketCap=numberFormat.format(qsdMarketCapNumber);}var BorderedSection=function BorderedSection(props){return/*#__PURE__*/React.createElement(Section,Object.assign({style:{borderBottom:\"1px solid \".concat(theme.border),paddingBottom:56,marginBottom:-24}},props));};return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(Tile,{line1:\"Next Epoch:\",line2:expansionAmount&&expansionAmount>0?\"Total supply will increase by \".concat(expansionAmount.toFixed(2),\" QSD\"):'No expansion rewards this epoch',line3:expansionAmount&&expansionAmount>0?\"Yielding \".concat(lpExpansionYield,\" on LP TVL (\").concat(lpAPR,\" APR) and \").concat(daoExpansionYield,\" to Bonded QSD (\").concat(daoAPR,\" APR)\"):'QSG will be allocated to QSD stakers'})),/*#__PURE__*/React.createElement(BorderedSection,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"Epoch (Real-time)\"},estimatedEpoch),/*#__PURE__*/React.createElement(InfoBox,{title:\"Epoch (Dao)\"},daoEpoch),/*#__PURE__*/React.createElement(InfoBox,{title:\"Next Epoch\"},nextEpochIn),/*#__PURE__*/React.createElement(InfoBox,{title:\"Treasury\"},treasuryQSDAmount?formatBN(treasuryQSDAmount,2)+' QSD':'... QSD',' ',\"(\",treasuryUSDValue,\")\"))),/*#__PURE__*/React.createElement(BorderedSection,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"LP Yield\"},lpExpansionYield),/*#__PURE__*/React.createElement(InfoBox,{title:\"LP APR\"},lpAPR),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Yield\"},daoExpansionYield),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD APR\"},daoAPR))),/*#__PURE__*/React.createElement(BorderedSection,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"Spot Price\"},qsdPrice?'$'+formatBN(qsdPrice,2):'...'),/*#__PURE__*/React.createElement(InfoBox,{title:\"TWAP Price\"},twapPrice?'$'+twapPrice.toFixed(2):'...'),/*#__PURE__*/React.createElement(InfoBox,{title:\"Total Supply\"},totalSupply?numberFormat.format(toFloat(totalSupply))+' QSD':'...'),/*#__PURE__*/React.createElement(InfoBox,{title:\"Market Cap\"},\"$\",qsdMarketCap))),/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"LP Bonded\"},lpBondedPercentage,\" (\",lpBondedPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"LP Staged\"},lpStagedPercentage,\" (\",lpStagedPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Bonded\"},daoBondedPercentage,\" (\",qsdBondedPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Staged\"},daoStagedPercentage,\" (\",qsdStagedPrice,\")\"))),/*#__PURE__*/React.createElement(TopBorderSection,{title:\"User\"},/*#__PURE__*/React.createElement(BorderedSection,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Wallet\"},userQsdBal?formatBN(userQsdBal,2)+' QSD':'0',\" (\",userQSDWalletPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Staged\"},userDaoStaged?formatBN(userDaoStaged,2)+' QSD':'0',\" (\",userQSDStagedPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"QSD Bonded\"},userDaoBonded?formatBN(userDaoBonded,2)+' QSD':'0',\" (\",userQSDBondedPrice,\")\"))),/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(InfoBox,{title:\"UNI-V2 Wallet\"},userUniBal?formatBN(userUniBal,2)+' UNI':'0',\" (\",userLPWalletPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"LP Staged\"},userLpStaged?formatBN(userLpStaged,2)+' UNI':'0',\" (\",userLPStagedPrice,\")\"),/*#__PURE__*/React.createElement(InfoBox,{title:\"LP Bonded\"},userLpBonded?formatBN(userLpBonded,2)+' UNI':'0',\" (\",userLPBondedPrice,\")\"))),/*#__PURE__*/React.createElement(Section,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){advance(QSDS.addr);},disabled:!user&&daoEpoch<estimatedEpoch},\"Advance Epoch\")))));}export default Tools;var InfoBox=function InfoBox(_ref4){var title=_ref4.title,children=_ref4.children;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:24,marginBottom:8,opacity:0.4}},title),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:20}},children));};","map":{"version":3,"sources":["/Users/J/crypto/dashboard/src/components/Tools/index.tsx"],"names":["Button","Layout","useTheme","React","useEffect","useState","useParams","TreasuryAddress","QSD","QSDS","UNI","epochformattedRemaining","getBalanceBonded","getBalanceOfStaged","getDaoIsBootstrapping","getEpoch","getExpansionAmount","getInstantaneousQSDPrice","getLPBondedLiquidity","getLPStagedLiquidity","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolTotalBonded","getPoolTotalStaged","getTokenBalance","getTokenTotalSupply","getTotalBonded","getTotalStaged","getTWAPPrice","getUserLPBonded","getUserLPStaged","getUserLPWallet","formatBN","toTokenUnitsBN","getPoolBondingAddress","getPoolLPAddress","advance","Row","Section","Tile","TopBorderSection","Tools","user","theme","override","daoEpoch","setDaoEpoch","estimatedEpoch","setEstimatedEpoch","nextEpochIn","setNextEpochIn","totalSupply","setTotalSupply","qsdPrice","setQSDPrice","twapPrice","setTwapPrice","expansionAmount","setExpansionAmount","treasuryQSDAmount","setTreasuryQSDAmount","qsdBondedLiquidity","setQSDBondedLiquidity","daiBondedLiquidity","setDAIBondedLiquidity","qsdStagedLiquidity","setQSDStagedLiquidity","daiStagedLiquidity","setDAIStagedLiquidity","daoBonded","setDaoBonded","daoStaged","setDaoStaged","lpBonded","setLPBonded","lpStaged","setLPStaged","userLpBonded","setUserLpBonded","userLpStaged","setUserLpStaged","userDaoBonded","setUserDaoBonded","userDaoStaged","setUserDaoStaged","userQsdBal","setUserQsdBal","userUniBal","setUserUniBal","userQsdWalletLiquidity","setUserQSDWalletLiquidity","userDaiWalletLiquidity","setUserDAIWalletLiquidity","userQsdBondedLiquidity","setUserQSDBondedLiquidity","userDaiBondedLiquidity","setUserDAIBondedLiquidity","userQsdStagedLiquidity","setUserQSDStagedLiquidity","userDaiStagedLiquidity","setUserDAIStagedLiquidity","f","poolLP","poolBonding","Promise","all","addr","spot","twap","supply","bondedLiquidity","stagedLiquidity","bondingBonded","bondingStaged","bootstrapping","daoE","treasuryQSD","qsd","dai","parseInt","decimals","g","userQSDBal","walletLiquidity","updateEpoch","e","split","setInterval","toFloat","a","parseFloat","join","lpBondedPercentage","lpStagedPercentage","daoBondedPercentage","daoStagedPercentage","qsdMarketCap","daoAPR","daoExpansionYield","lpExpansionYield","lpAPR","qsdBondedPrice","qsdStagedPrice","lpBondedPrice","lpStagedPrice","userQSDWalletPrice","userQSDBondedPrice","userQSDStagedPrice","userLPWalletPrice","userLPBondedPrice","userLPStagedPrice","treasuryUSDValue","options","minimumFractionDigits","maximumFractionDigits","numberFormat","Intl","NumberFormat","totalDAI","format","daiToAdd","lpYield","totalQSD","qsdToAdd","daoYield","lpBondedF","lpStagedF","total","toFixed","daoBondedF","daoStagedF","qsdMarketCapNumber","BorderedSection","props","borderBottom","border","paddingBottom","marginBottom","InfoBox","title","children","fontSize","opacity"],"mappings":"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","sourcesContent":["import { Button, Layout, useTheme } from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { TreasuryAddress } from '../../constants/contracts';\nimport { QSD, QSDS, UNI } from '../../constants/tokens';\nimport { epochformattedRemaining } from '../../utils/calculation';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged,\n  getDaoIsBootstrapping,\n  getEpoch,\n  getExpansionAmount,\n  getInstantaneousQSDPrice,\n  getLPBondedLiquidity,\n  getLPStagedLiquidity,\n  getPoolBalanceOfBonded,\n  getPoolBalanceOfStaged,\n  getPoolTotalBonded,\n  getPoolTotalStaged,\n  getTokenBalance,\n  getTokenTotalSupply,\n  getTotalBonded,\n  getTotalStaged,\n  getTWAPPrice,\n  getUserLPBonded,\n  getUserLPStaged,\n  getUserLPWallet,\n} from '../../utils/infura';\nimport { formatBN, toTokenUnitsBN } from '../../utils/number';\nimport { getPoolBondingAddress, getPoolLPAddress } from '../../utils/pool';\nimport { advance } from '../../utils/web3';\nimport { Row, Section, Tile, TopBorderSection } from '../common';\nimport { SectionProps } from '../common/Section';\n\nfunction Tools({ user }: { user: string }) {\n  const theme = useTheme();\n\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [daoEpoch, setDaoEpoch] = useState(0);\n  const [estimatedEpoch, setEstimatedEpoch] = useState(0);\n  const [nextEpochIn, setNextEpochIn] = useState('00:00:00');\n  const [totalSupply, setTotalSupply] = useState<BigNumber | null>(null);\n  const [qsdPrice, setQSDPrice] = useState<BigNumber | null>(null);\n  const [twapPrice, setTwapPrice] = useState<null | number>(null);\n  const [expansionAmount, setExpansionAmount] = useState<null | number>(null);\n\n  const [treasuryQSDAmount, setTreasuryQSDAmount] = useState<null | BigNumber>(\n    null\n  );\n\n  const [qsdBondedLiquidity, setQSDBondedLiquidity] = useState<number | null>(\n    null\n  );\n  const [daiBondedLiquidity, setDAIBondedLiquidity] = useState<number | null>(\n    null\n  );\n\n  const [qsdStagedLiquidity, setQSDStagedLiquidity] = useState<number | null>(\n    null\n  );\n  const [daiStagedLiquidity, setDAIStagedLiquidity] = useState<number | null>(\n    null\n  );\n\n  const [daoBonded, setDaoBonded] = useState<BigNumber | null>(null);\n  const [daoStaged, setDaoStaged] = useState<BigNumber | null>(null);\n  const [lpBonded, setLPBonded] = useState<BigNumber | null>(null);\n  const [lpStaged, setLPStaged] = useState<BigNumber | null>(null);\n  const [userLpBonded, setUserLpBonded] = useState<BigNumber | null>(null);\n  const [userLpStaged, setUserLpStaged] = useState<BigNumber | null>(null);\n  const [userDaoBonded, setUserDaoBonded] = useState<BigNumber | null>(null);\n  const [userDaoStaged, setUserDaoStaged] = useState<BigNumber | null>(null);\n  const [userQsdBal, setUserQsdBal] = useState<BigNumber | null>(null);\n  const [userUniBal, setUserUniBal] = useState<BigNumber | null>(null);\n\n  const [userQsdWalletLiquidity, setUserQSDWalletLiquidity] = useState<\n    number | null\n  >(null);\n  const [userDaiWalletLiquidity, setUserDAIWalletLiquidity] = useState<\n    number | null\n  >(null);\n\n  const [userQsdBondedLiquidity, setUserQSDBondedLiquidity] = useState<\n    number | null\n  >(null);\n  const [userDaiBondedLiquidity, setUserDAIBondedLiquidity] = useState<\n    number | null\n  >(null);\n\n  const [userQsdStagedLiquidity, setUserQSDStagedLiquidity] = useState<\n    number | null\n  >(null);\n  const [userDaiStagedLiquidity, setUserDAIStagedLiquidity] = useState<\n    number | null\n  >(null);\n\n  useEffect(() => {\n    const f = async () => {\n      const poolLP = await getPoolLPAddress();\n      const poolBonding = await getPoolBondingAddress();\n\n      const [\n        spot,\n        twap,\n        supply,\n        bondedLiquidity,\n        stagedLiquidity,\n        lpBonded,\n        lpStaged,\n        daoBonded,\n        daoStaged,\n        bondingBonded,\n        bondingStaged,\n        expansionAmount,\n        bootstrapping,\n        daoE,\n        treasuryQSD,\n      ] = await Promise.all([\n        getInstantaneousQSDPrice(),\n        getTWAPPrice(),\n        getTokenTotalSupply(QSD.addr),\n        getLPBondedLiquidity(),\n        getLPStagedLiquidity(),\n        getPoolTotalBonded(poolLP),\n        getPoolTotalStaged(poolLP),\n        getTotalBonded(QSDS.addr),\n        getTotalStaged(QSDS.addr),\n        getPoolTotalBonded(poolBonding),\n        getPoolTotalStaged(poolBonding),\n        getExpansionAmount(),\n        getDaoIsBootstrapping(),\n        getEpoch(QSDS.addr),\n        getTokenBalance(QSD.addr, TreasuryAddress),\n      ]);\n\n      setTwapPrice(twap);\n      setTotalSupply(toTokenUnitsBN(supply, 18));\n      setQSDPrice(toTokenUnitsBN(spot, 18));\n      setQSDStagedLiquidity(stagedLiquidity.qsd);\n      setDAIStagedLiquidity(stagedLiquidity.dai);\n      setQSDBondedLiquidity(bondedLiquidity.qsd);\n      setDAIBondedLiquidity(bondedLiquidity.dai);\n      setLPBonded(toTokenUnitsBN(lpBonded, 18));\n      setLPStaged(toTokenUnitsBN(lpStaged, 18));\n      setDaoEpoch(parseInt(daoE, 10));\n      setTreasuryQSDAmount(toTokenUnitsBN(treasuryQSD, QSD.decimals));\n\n      // If is bootstrapping, then bonding will be referencing dao\n      // otherwise it'll be referencing bonding\n      if (bootstrapping) {\n        setDaoBonded(toTokenUnitsBN(daoBonded, 18));\n        setDaoStaged(toTokenUnitsBN(daoStaged, 18));\n      } else {\n        setDaoBonded(toTokenUnitsBN(bondingBonded, 18));\n        setDaoStaged(toTokenUnitsBN(bondingStaged, 18));\n      }\n\n      setExpansionAmount(expansionAmount);\n    };\n\n    const g = async () => {\n      if (!user) return;\n\n      const poolLP = await getPoolLPAddress();\n\n      const [\n        userQSDBal,\n        userUniBal,\n        userLpBonded,\n        userLpStaged,\n        userDaoBonded,\n        userDaoStaged,\n        walletLiquidity,\n        stagedLiquidity,\n        bondedLiquidity,\n      ] = await Promise.all([\n        getTokenBalance(QSD.addr, user),\n        getTokenBalance(UNI.addr, user),\n        getPoolBalanceOfBonded(poolLP, user),\n        getPoolBalanceOfStaged(poolLP, user),\n        getBalanceBonded(QSDS.addr, user),\n        getBalanceOfStaged(QSDS.addr, user),\n        getUserLPWallet(user),\n        getUserLPStaged(user),\n        getUserLPBonded(user),\n      ]);\n\n      setUserQsdBal(toTokenUnitsBN(userQSDBal, 18));\n      setUserUniBal(toTokenUnitsBN(userUniBal, 18));\n      setUserLpBonded(toTokenUnitsBN(userLpBonded, 18));\n      setUserLpStaged(toTokenUnitsBN(userLpStaged, 18));\n      setUserDaoBonded(toTokenUnitsBN(userDaoBonded, 18));\n      setUserDaoStaged(toTokenUnitsBN(userDaoStaged, 18));\n\n      setUserQSDWalletLiquidity(walletLiquidity.qsd);\n      setUserDAIWalletLiquidity(walletLiquidity.dai);\n\n      setUserQSDStagedLiquidity(stagedLiquidity.qsd);\n      setUserDAIStagedLiquidity(stagedLiquidity.dai);\n\n      setUserQSDBondedLiquidity(bondedLiquidity.qsd);\n      setUserDAIBondedLiquidity(bondedLiquidity.dai);\n    };\n\n    async function updateEpoch() {\n      const e = epochformattedRemaining();\n\n      setEstimatedEpoch(parseInt(e.split('-')[0], 10));\n      setNextEpochIn(e.split('-')[1]);\n    }\n\n    setInterval(updateEpoch, 1000);\n\n    f();\n    g();\n  }, [user]);\n\n  const toFloat = (a: BigNumber): number => {\n    return parseFloat(formatBN(a, 2).split(',').join(''));\n  };\n\n  let lpBondedPercentage = '...';\n  let lpStagedPercentage = '...';\n  let daoBondedPercentage = '...';\n  let daoStagedPercentage = '...';\n  let qsdMarketCap = '...';\n  let daoAPR = '...';\n  let daoExpansionYield = '...';\n  let lpExpansionYield = '...';\n  let lpAPR = '...';\n\n  let qsdBondedPrice = '$...';\n  let qsdStagedPrice = '$...';\n  let lpBondedPrice = '$...';\n  let lpStagedPrice = '$...';\n\n  let userQSDWalletPrice = '$0';\n  let userQSDBondedPrice = '$0';\n  let userQSDStagedPrice = '$0';\n\n  let userLPWalletPrice = '$0';\n  let userLPBondedPrice = '$0';\n  let userLPStagedPrice = '$0';\n\n  let treasuryUSDValue = '$0';\n\n  // Define number formatting\n  var options = { minimumFractionDigits: 0,\n                maximumFractionDigits: 2 };\n  var numberFormat = new Intl.NumberFormat('en-US', options);\n\n  // Calculate prices\n  if (qsdPrice && treasuryQSDAmount) {\n    const totalDAI = toFloat(treasuryQSDAmount) * toFloat(qsdPrice);\n\n    treasuryUSDValue = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && qsdStagedLiquidity && daiStagedLiquidity) {\n    const totalDAI =\n      qsdStagedLiquidity * toFloat(qsdPrice) + daiStagedLiquidity;\n    lpStagedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && qsdBondedLiquidity && daiBondedLiquidity) {\n    const totalDAI =\n      qsdBondedLiquidity * toFloat(qsdPrice) + daiBondedLiquidity;\n    lpBondedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && daoBonded) {\n    const totalDAI = toFloat(daoBonded) * toFloat(qsdPrice);\n    qsdBondedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && daoStaged) {\n    const totalDAI = toFloat(daoStaged) * toFloat(qsdPrice);\n    qsdStagedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userQsdWalletLiquidity && userDaiWalletLiquidity) {\n    const totalDAI =\n      userQsdWalletLiquidity * toFloat(qsdPrice) + userDaiWalletLiquidity;\n\n    userLPWalletPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userQsdStagedLiquidity && userDaiStagedLiquidity) {\n    const totalDAI =\n      userQsdStagedLiquidity * toFloat(qsdPrice) + userDaiStagedLiquidity;\n\n    userLPStagedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userQsdBondedLiquidity && userDaiBondedLiquidity) {\n    const totalDAI =\n      userQsdBondedLiquidity * toFloat(qsdPrice) + userDaiBondedLiquidity;\n\n    userLPBondedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userQsdBal) {\n    const totalDAI = toFloat(userQsdBal) * toFloat(qsdPrice);\n\n    userQSDWalletPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userDaoBonded) {\n    const totalDAI = toFloat(userDaoBonded) * toFloat(qsdPrice);\n\n    userQSDBondedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  if (qsdPrice && userDaoStaged) {\n    const totalDAI = toFloat(userDaoStaged) * toFloat(qsdPrice);\n\n    userQSDStagedPrice = '$' + numberFormat.format(totalDAI);\n  }\n\n  // Calculate LP APR (4 hrs)\n  if (qsdPrice && qsdBondedLiquidity && daiBondedLiquidity && expansionAmount) {\n    const totalDAI =\n      qsdBondedLiquidity * toFloat(qsdPrice) + daiBondedLiquidity;\n    const daiToAdd = (expansionAmount / 2) * toFloat(qsdPrice);\n\n    const lpYield = (daiToAdd / totalDAI) * 100;\n\n    lpExpansionYield =\n      Intl.NumberFormat('en', {\n        maximumFractionDigits: 0,\n        minimumFractionDigits: 0,\n      }).format(lpYield) + '%';\n    lpAPR = Intl.NumberFormat('en', {\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0,\n    }).format(lpYield * 6 * 365) + '%';\n  }\n\n  // Calculate DAO APR (4 hrs)\n  if (qsdPrice && daoBonded && expansionAmount) {\n    const totalQSD = toFloat(daoBonded);\n    const qsdToAdd = expansionAmount / 2;\n\n    const daoYield = (qsdToAdd / totalQSD) * 100;\n\n    daoExpansionYield = Intl.NumberFormat('en', {\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0,\n    }).format(daoYield) + '%';\n    daoAPR = Intl.NumberFormat('en', {\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0,\n    }).format(daoYield * 6 * 365) + '%';\n  }\n\n  if (qsdPrice && qsdBondedLiquidity)\n    if (lpBonded && lpStaged) {\n      const lpBondedF = toFloat(lpBonded);\n      const lpStagedF = toFloat(lpStaged);\n\n      const total = lpBondedF + lpStagedF;\n\n      if (total > 0) {\n        lpBondedPercentage = ((lpBondedF / total) * 100).toFixed(2) + '%';\n        lpStagedPercentage = ((lpStagedF / total) * 100).toFixed(2) + '%';\n      }\n    }\n\n  if (daoBonded && daoStaged) {\n    const daoBondedF = toFloat(daoBonded);\n    const daoStagedF = toFloat(daoStaged);\n\n    const total = daoBondedF + daoStagedF;\n\n    if (total > 0) {\n      daoBondedPercentage = ((daoBondedF / total) * 100).toFixed(2) + '%';\n      daoStagedPercentage = ((daoStagedF / total) * 100).toFixed(2) + '%';\n    }\n  }\n\n  if (qsdPrice && totalSupply) {\n    \n    let qsdMarketCapNumber = 0;\n    \n    qsdMarketCapNumber = toFloat(qsdPrice) * toFloat(totalSupply);\n\n    qsdMarketCap = numberFormat.format(qsdMarketCapNumber);\n\n  }\n\n  const BorderedSection: React.FC<SectionProps> = (props) => (\n    <Section\n      style={{\n        borderBottom: `1px solid ${theme.border}`,\n        paddingBottom: 56,\n        marginBottom: -24,\n      }}\n      {...props}\n    />\n  );\n\n  return (\n    <Layout>\n      <Section>\n        <Tile\n          line1='Next Epoch:'\n          line2={\n            expansionAmount && expansionAmount > 0\n              ? `Total supply will increase by ${expansionAmount.toFixed(\n                  2\n                )} QSD`\n              : 'No expansion rewards this epoch'\n          }\n          line3={\n            expansionAmount && expansionAmount > 0\n              ? `Yielding ${lpExpansionYield} on LP TVL (${lpAPR} APR) and ${daoExpansionYield} to Bonded QSD (${daoAPR} APR)`\n              : 'QSG will be allocated to QSD stakers'\n          }\n        />\n      </Section>\n      <BorderedSection>\n        <Row>\n          <InfoBox title='Epoch (Real-time)'>{estimatedEpoch}</InfoBox>\n          <InfoBox title='Epoch (Dao)'>{daoEpoch}</InfoBox>\n          <InfoBox title='Next Epoch'>{nextEpochIn}</InfoBox>\n          <InfoBox title='Treasury'>\n            {treasuryQSDAmount\n              ? formatBN(treasuryQSDAmount, 2) + ' QSD'\n              : '... QSD'}{' '}\n            ({treasuryUSDValue})\n          </InfoBox>\n        </Row>\n      </BorderedSection>\n      <BorderedSection>\n        <Row>\n          <InfoBox title='LP Yield'>{lpExpansionYield}</InfoBox>\n          <InfoBox title='LP APR'>{lpAPR}</InfoBox>\n          <InfoBox title='QSD Yield'>{daoExpansionYield}</InfoBox>\n          <InfoBox title='QSD APR'>{daoAPR}</InfoBox>\n        </Row>\n      </BorderedSection>\n      <BorderedSection>\n        <Row>\n          <InfoBox title='Spot Price'>\n            {qsdPrice ? '$' + formatBN(qsdPrice, 2) : '...'}\n          </InfoBox>\n          <InfoBox title='TWAP Price'>\n            {twapPrice ? '$' + twapPrice.toFixed(2) : '...'}\n          </InfoBox>\n          <InfoBox title='Total Supply'>\n            {totalSupply\n              ? numberFormat.format(toFloat(totalSupply)) + ' QSD'\n              : '...'}\n          </InfoBox>\n\n          <InfoBox title='Market Cap'>${qsdMarketCap}</InfoBox>\n        </Row>\n      </BorderedSection>\n      <Section>\n        <Row>\n          <InfoBox title='LP Bonded'>\n            {lpBondedPercentage} ({lpBondedPrice})\n          </InfoBox>\n          <InfoBox title='LP Staged'>\n            {lpStagedPercentage} ({lpStagedPrice})\n          </InfoBox>\n          <InfoBox title='QSD Bonded'>\n            {daoBondedPercentage} ({qsdBondedPrice})\n          </InfoBox>\n          <InfoBox title='QSD Staged'>\n            {daoStagedPercentage} ({qsdStagedPrice})\n          </InfoBox>\n        </Row>\n      </Section>\n      <TopBorderSection title='User'>\n        <BorderedSection>\n          <Row>\n            <InfoBox title='QSD Wallet'>\n              {userQsdBal ? formatBN(userQsdBal, 2) + ' QSD' : '0'} (\n              {userQSDWalletPrice})\n            </InfoBox>\n            <InfoBox title='QSD Staged'>\n              {userDaoStaged ? formatBN(userDaoStaged, 2) + ' QSD' : '0'} (\n              {userQSDStagedPrice})\n            </InfoBox>\n            <InfoBox title='QSD Bonded'>\n              {userDaoBonded ? formatBN(userDaoBonded, 2) + ' QSD' : '0'} (\n              {userQSDBondedPrice})\n            </InfoBox>\n          </Row>\n        </BorderedSection>\n        <Section>\n          <Row>\n            <InfoBox title='UNI-V2 Wallet'>\n              {userUniBal ? formatBN(userUniBal, 2) + ' UNI' : '0'} (\n              {userLPWalletPrice})\n            </InfoBox>\n            <InfoBox title='LP Staged'>\n              {userLpStaged ? formatBN(userLpStaged, 2) + ' UNI' : '0'} (\n              {userLPStagedPrice})\n            </InfoBox>\n            <InfoBox title='LP Bonded'>\n              {userLpBonded ? formatBN(userLpBonded, 2) + ' UNI' : '0'} (\n              {userLPBondedPrice})\n            </InfoBox>\n          </Row>\n        </Section>\n        <Section>\n          <Row>\n            <Button\n              onClick={() => {\n                advance(QSDS.addr);\n              }}\n              disabled={!user && daoEpoch < estimatedEpoch}\n            >\n              Advance Epoch\n            </Button>\n          </Row>\n        </Section>\n      </TopBorderSection>\n    </Layout>\n  );\n}\n\nexport default Tools;\n\ninterface InfoBoxProps extends React.ComponentProps<'div'> {\n  title: string;\n}\nconst InfoBox: React.FC<InfoBoxProps> = ({ title, children }) => (\n  <div>\n    <div style={{ fontSize: 24, marginBottom: 8, opacity: 0.4 }}>{title}</div>\n    <div style={{ fontSize: 20 }}>{children}</div>\n  </div>\n);\n"]},"metadata":{},"sourceType":"module"}