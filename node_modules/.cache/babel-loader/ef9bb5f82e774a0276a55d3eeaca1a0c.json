{"ast":null,"code":"import { _ as _slicedToArray } from './slicedToArray-4e274c67.js';\nimport './unsupportedIterableToArray-137e449b.js';\nimport React, { useState, useCallback } from 'react';\nimport './_commonjsHelpers-97e6d7b1.js';\nimport { P as PropTypes } from './index-097535f1.js';\nimport { _ as _defineProperty } from './defineProperty-a0480c32.js';\nimport './toConsumableArray-127424c2.js';\nimport _styled from 'styled-components';\nimport './getPrototypeOf-b96da1e1.js';\nimport './color.js';\nimport './components.js';\nimport './contains-component.js';\nimport './css.js';\nimport './dayjs.min-e57fb69a.js';\nimport './date.js';\nimport './miscellaneous.js';\nimport './environment.js';\nimport './font.js';\nimport './math-e6d0e93a.js';\nimport './characters.js';\nimport './format.js';\nimport './keycodes.js';\nimport './url.js';\nimport './web3.js';\nimport { GU } from './constants.js';\nimport './breakpoints.js';\nimport { springs } from './springs.js';\nimport { textStyle } from './text-styles.js';\nimport './theme-dark.js';\nimport './theme-light.js';\nimport { useTheme } from './Theme.js';\nimport './extends-db4f0c26.js';\nimport './objectWithoutProperties-234758e1.js';\nimport './index-422d37c0.js';\nimport './isObject-3c6ec07e.js';\nimport './Viewport-cc7debfb.js';\nimport './Layout.js';\nimport './FocusVisible.js';\nimport './ButtonBase.js';\nimport './IconPropTypes-aab7337d.js';\nimport './IconAddUser.js';\nimport './IconAlert.js';\nimport './IconAlignCenter.js';\nimport './IconAlignJustify.js';\nimport './IconAlignLeft.js';\nimport './IconAlignRight.js';\nimport './IconAragon.js';\nimport './IconArrowDown.js';\nimport './IconArrowLeft.js';\nimport './IconArrowRight.js';\nimport './IconArrowUp.js';\nimport './IconAtSign.js';\nimport './IconBlock.js';\nimport './IconBookmark.js';\nimport './IconCalendar.js';\nimport './IconCanvas.js';\nimport './IconCaution.js';\nimport './IconCenter.js';\nimport './IconChart.js';\nimport './IconChat.js';\nimport './IconCheck.js';\nimport './IconChip.js';\nimport './IconCircleCheck.js';\nimport './IconCircleMinus.js';\nimport './IconCirclePlus.js';\nimport './IconClock.js';\nimport './IconCloudDownload.js';\nimport './IconCloudUpload.js';\nimport './IconCoin.js';\nimport './IconConfiguration.js';\nimport './IconConnect.js';\nimport './IconConnection.js';\nimport './IconConsole.js';\nimport './IconCopy.js';\nimport './IconCross.js';\nimport './IconDashedSquare.js';\nimport './IconDown.js';\nimport './IconDownload.js';\nimport './IconEdit.js';\nimport './IconEllipsis.js';\nimport './IconEnter.js';\nimport './IconEthereum.js';\nimport './IconExternal.js';\nimport './IconFile.js';\nimport './IconFilter.js';\nimport './IconFlag.js';\nimport './IconFolder.js';\nimport './IconGraph2.js';\nimport './IconGraph.js';\nimport './IconGrid.js';\nimport './IconGroup.js';\nimport './IconHash.js';\nimport './IconHeart.js';\nimport './IconHide.js';\nimport './IconHome.js';\nimport './IconImage.js';\nimport './IconInfo.js';\nimport './IconLabel.js';\nimport './IconLayers.js';\nimport './IconLeft.js';\nimport './IconLink.js';\nimport './IconLocation.js';\nimport './IconLock.js';\nimport './IconMail.js';\nimport './IconMaximize.js';\nimport './IconMenu.js';\nimport './IconMinimize.js';\nimport './IconMinus.js';\nimport './IconMove.js';\nimport './IconNoPicture.js';\nimport './IconPicture.js';\nimport './IconPlus.js';\nimport './IconPower.js';\nimport './IconPrint.js';\nimport './IconProhibited.js';\nimport './IconQuestion.js';\nimport './IconRefresh.js';\nimport './IconRemoveUser.js';\nimport './IconRight.js';\nimport './IconRotateLeft.js';\nimport './IconRotateRight.js';\nimport './IconSearch.js';\nimport './IconSettings.js';\nimport './IconShare.js';\nimport './IconSquareMinus.js';\nimport './IconSquarePlus.js';\nimport './IconSquare.js';\nimport './IconStarFilled.js';\nimport './IconStar.js';\nimport './IconSwap.js';\nimport './IconTarget.js';\nimport './IconToken.js';\nimport './IconTrash.js';\nimport './IconUnlock.js';\nimport './IconUp.js';\nimport './IconUpload.js';\nimport './IconUser.js';\nimport './IconView.js';\nimport './IconVote.js';\nimport './IconWallet.js';\nimport './IconWarning.js';\nimport './IconWorld.js';\nimport './IconWrite.js';\nimport './IconZoomIn.js';\nimport './IconZoomOut.js';\nimport './objectWithoutPropertiesLoose-9606ad13.js';\nimport 'react-dom';\nimport { e as extendedAnimated, T as Transition } from './web-a351a0a1.js';\nimport Checkbox from './Checkbox.js';\nimport './Button.js';\nimport './ButtonIcon.js';\nimport { ToggleButton } from './ToggleButton.js';\nimport { OpenedSurfaceBorder } from './OpenedSurfaceBorder.js';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar _StyledDiv = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv\",\n  componentId: \"sc-1wnrej-0\"\n})([\"position:relative;padding:0;padding-right:\", \"px;padding-left:\", \"px;border-bottom:\", \"px solid \", \";transition:background 150ms ease-in-out;background:\", \";\"], function (p) {\n  return p._css;\n}, function (p) {\n  return p._css2;\n}, function (p) {\n  return p._css3;\n}, function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n});\n\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv2\",\n  componentId: \"sc-1wnrej-1\"\n})([\"position:absolute;top:\", \"px;left:0;display:flex;justify-content:center;width:\", \"px;\"], function (p) {\n  return p._css6;\n}, function (p) {\n  return p._css7;\n});\n\nvar _StyledDiv3 = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv3\",\n  componentId: \"sc-1wnrej-2\"\n})([\"position:absolute;top:\", \"px;right:\", \"px;\"], function (p) {\n  return p._css8;\n}, function (p) {\n  return p._css9;\n});\n\nvar _StyledDiv4 = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv4\",\n  componentId: \"sc-1wnrej-3\"\n})([\"display:flex;flex-direction:column;padding-bottom:\", \"px;\"], function (p) {\n  return p._css10;\n});\n\nvar _StyledDiv5 = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv5\",\n  componentId: \"sc-1wnrej-4\"\n})([\"display:flex;align-items:center;margin:\", \"px 0 \", \"px;color:\", \";\", \";\"], function (p) {\n  return p._css11;\n}, function (p) {\n  return p._css12;\n}, function (p) {\n  return p._css13;\n}, function (p) {\n  return p._css14;\n});\n\nfunction ListView(_ref) {\n  var allSelected = _ref.allSelected,\n      entries = _ref.entries,\n      fields = _ref.fields,\n      hasAnyExpansion = _ref.hasAnyExpansion,\n      onSelect = _ref.onSelect,\n      onSelectAll = _ref.onSelectAll,\n      renderSelectionCount = _ref.renderSelectionCount,\n      selectable = _ref.selectable,\n      rowHeight = _ref.rowHeight;\n  var theme = useTheme();\n\n  var _useState = useState(-1),\n      _useState2 = _slicedToArray(_useState, 2),\n      opened = _useState2[0],\n      setOpened = _useState2[1];\n\n  var toggleEntry = useCallback(function (index) {\n    setOpened(function (opened) {\n      return opened === index ? -1 : index;\n    });\n  }, []);\n  var sideSpace = selectable || hasAnyExpansion;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, entries.map(function (entry, index) {\n    var hasExpansion = entry.expansion.content.length > 0;\n    return /*#__PURE__*/React.createElement(_StyledDiv, {\n      key: index,\n      _css: 3 * GU,\n      _css2: (sideSpace ? 6.5 : 3) * GU,\n      _css3: Number(index !== entries.length - 1),\n      _css4: theme.border,\n      _css5: entry.selected ? theme.surfaceSelected : 'none'\n    }, /*#__PURE__*/React.createElement(OpenedSurfaceBorder, {\n      opened: entry.index === opened\n    }), sideSpace && /*#__PURE__*/React.createElement(_StyledDiv2, {\n      _css6: 1.5 * GU,\n      _css7: 6.5 * GU\n    }, selectable && /*#__PURE__*/React.createElement(Select, {\n      index: entry.index,\n      selected: entry.selected,\n      onSelect: onSelect\n    }), !selectable && hasExpansion && /*#__PURE__*/React.createElement(ToggleButton, {\n      opened: entry.index === opened,\n      onClick: function onClick() {\n        return toggleEntry(entry.index);\n      }\n    })), entry.actions && /*#__PURE__*/React.createElement(_StyledDiv3, {\n      _css8: 2 * GU,\n      _css9: 3 * GU\n    }, entry.actions), /*#__PURE__*/React.createElement(\"div\", null, entry.entryNodes.map(function (content, index) {\n      return [// field content\n      content, // field label\n      fields[index].label, // priority number\n      fields[index].priority && fields[index].priority || 0];\n    }) // sort by priority\n    .sort(function (a, b) {\n      return b[2] - a[2];\n    }).map(function (_ref2, index, entryNodes) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          content = _ref3[0],\n          label = _ref3[1];\n\n      return /*#__PURE__*/React.createElement(_StyledDiv4, {\n        key: index,\n        _css10: index === entryNodes.length - 1 ? 2 * GU : 0\n      }, /*#__PURE__*/React.createElement(_StyledDiv5, {\n        _css11: 2 * GU,\n        _css12: 1 * GU,\n        _css13: theme.surfaceContentSecondary,\n        _css14: textStyle('label2')\n      }, label), /*#__PURE__*/React.createElement(\"div\", null, content));\n    })), hasExpansion && /*#__PURE__*/React.createElement(EntryExpansion, {\n      expansion: entry.expansion,\n      opened: opened === entry.index,\n      rowHeight: rowHeight\n    }));\n  }));\n}\n\nListView.propTypes = {\n  allSelected: PropTypes.oneOf([-1, 0, 1]).isRequired,\n  entries: PropTypes.array.isRequired,\n  fields: PropTypes.array.isRequired,\n  hasAnyExpansion: PropTypes.bool.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  renderSelectionCount: PropTypes.func.isRequired,\n  rowHeight: PropTypes.number.isRequired,\n  selectable: PropTypes.bool.isRequired\n}; // Disable prop types check for internal components\n\n/* eslint-disable react/prop-types */\n\nvar _StyledAnimatedDiv = _styled(extendedAnimated.div).withConfig({\n  displayName: \"ListView___StyledAnimatedDiv\",\n  componentId: \"sc-1wnrej-5\"\n})([\"overflow:hidden;background:\", \";margin-left:\", \"px;margin-right:\", \"px;padding-left:\", \"px;box-shadow:inset 0 6px 4px -4px rgba(0,0,0,0.16);\"], function (p) {\n  return p._css15;\n}, function (p) {\n  return p._css16;\n}, function (p) {\n  return p._css17;\n}, function (p) {\n  return p._css18;\n});\n\nvar _StyledDiv6 = _styled(\"div\").withConfig({\n  displayName: \"ListView___StyledDiv6\",\n  componentId: \"sc-1wnrej-6\"\n})([\"display:flex;align-items:center;height:\", \";padding-right:\", \"px;\"], function (p) {\n  return p._css19;\n}, function (p) {\n  return p._css20;\n});\n\nfunction EntryExpansion(_ref4) {\n  var expansion = _ref4.expansion,\n      opened = _ref4.opened,\n      rowHeight = _ref4.rowHeight;\n  var theme = useTheme(); // Handles the height of the expansion in free layout mode\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      freeLayoutContentHeight = _useState4[0],\n      setFreeLayoutContentHeight = _useState4[1];\n\n  var handleFreeLayoutContentRef = useCallback(function (element) {\n    if (element) {\n      setFreeLayoutContentHeight(element.getBoundingClientRect().height);\n    }\n  }, []);\n  var height = expansion.freeLayout ? freeLayoutContentHeight : rowHeight * expansion.content.length;\n  return /*#__PURE__*/React.createElement(Transition, {\n    native: true,\n    items: opened,\n    from: {\n      height: 0\n    },\n    enter: {\n      height: height\n    },\n    update: {\n      height: height\n    },\n    leave: {\n      height: 0\n    },\n    config: _objectSpread({}, springs.smooth, {\n      precision: 0.1\n    })\n  }, function (show) {\n    return show && function (_ref5) {\n      var height = _ref5.height;\n      return /*#__PURE__*/React.createElement(_StyledAnimatedDiv, {\n        style: {\n          height: height.interpolate(function (v) {\n            return \"\".concat(v, \"px\");\n          })\n        },\n        _css15: theme.surfaceUnder,\n        _css16: -6.5 * GU,\n        _css17: -3 * GU,\n        _css18: 6.5 * GU\n      }, expansion.content.map(function (child, i) {\n        return /*#__PURE__*/React.createElement(_StyledDiv6, {\n          key: i,\n          ref: expansion.freeLayout ? handleFreeLayoutContentRef : null,\n          _css19: expansion.freeLayout ? 'auto' : \"\".concat(rowHeight, \"px\"),\n          _css20: 3 * GU\n        }, child);\n      }));\n    };\n  });\n}\n\nfunction Select(_ref6) {\n  var index = _ref6.index,\n      selected = _ref6.selected,\n      onSelect = _ref6.onSelect;\n  var change = useCallback(function (check) {\n    onSelect(index, check);\n  }, [index, onSelect]);\n  return /*#__PURE__*/React.createElement(Checkbox, {\n    onChange: change,\n    checked: selected\n  });\n}\n\nexport { ListView };","map":{"version":3,"sources":["../../src/components/DataView/ListView.js"],"names":["allSelected","entries","fields","hasAnyExpansion","onSelect","onSelectAll","renderSelectionCount","selectable","rowHeight","theme","useTheme","opened","setOpened","useState","toggleEntry","useCallback","sideSpace","hasExpansion","entry","Number","index","GU","b","a","content","label","entryNodes","textStyle","ListView","PropTypes","isRequired","expansion","freeLayoutContentHeight","setFreeLayoutContentHeight","handleFreeLayoutContentRef","element","height","springs","precision","show","selected","change"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition, animated } from 'react-spring'\nimport { GU, springs, textStyle } from '../../style'\nimport { useTheme } from '../../theme'\nimport Checkbox from '../Input/Checkbox'\nimport { ToggleButton } from './ToggleButton'\nimport { OpenedSurfaceBorder } from './OpenedSurfaceBorder'\n\nfunction ListView({\n  allSelected,\n  entries,\n  fields,\n  hasAnyExpansion,\n  onSelect,\n  onSelectAll,\n  renderSelectionCount,\n  selectable,\n  rowHeight,\n}) {\n  const theme = useTheme()\n\n  const [opened, setOpened] = useState(-1)\n\n  const toggleEntry = useCallback(index => {\n    setOpened(opened => (opened === index ? -1 : index))\n  }, [])\n\n  const sideSpace = selectable || hasAnyExpansion\n\n  return (\n    <React.Fragment>\n      {entries.map((entry, index) => {\n        const hasExpansion = entry.expansion.content.length > 0\n        return (\n          <div\n            key={index}\n            css={`\n              position: relative;\n              padding: 0;\n              padding-right: ${3 * GU}px;\n              padding-left: ${(sideSpace ? 6.5 : 3) * GU}px;\n              border-bottom: ${Number(index !== entries.length - 1)}px solid\n                ${theme.border};\n              transition: background 150ms ease-in-out;\n              background: ${entry.selected ? theme.surfaceSelected : 'none'};\n            `}\n          >\n            <OpenedSurfaceBorder opened={entry.index === opened} />\n            {sideSpace && (\n              <div\n                css={`\n                  position: absolute;\n                  top: ${1.5 * GU}px;\n                  left: 0;\n                  display: flex;\n                  justify-content: center;\n                  width: ${6.5 * GU}px;\n                `}\n              >\n                {selectable && (\n                  <Select\n                    index={entry.index}\n                    selected={entry.selected}\n                    onSelect={onSelect}\n                  />\n                )}\n                {!selectable && hasExpansion && (\n                  <ToggleButton\n                    opened={entry.index === opened}\n                    onClick={() => toggleEntry(entry.index)}\n                  />\n                )}\n              </div>\n            )}\n            {entry.actions && (\n              <div\n                css={`\n                  position: absolute;\n                  top: ${2 * GU}px;\n                  right: ${3 * GU}px;\n                `}\n              >\n                {entry.actions}\n              </div>\n            )}\n            <div>\n              {entry.entryNodes\n                .map((content, index) => [\n                  // field content\n                  content,\n                  // field label\n                  fields[index].label,\n                  // priority number\n                  (fields[index].priority && fields[index].priority) || 0,\n                ])\n                // sort by priority\n                .sort((a, b) => b[2] - a[2])\n                .map(([content, label], index, entryNodes) => (\n                  <div\n                    key={index}\n                    css={`\n                      display: flex;\n                      flex-direction: column;\n                      padding-bottom: ${index === entryNodes.length - 1\n                        ? 2 * GU\n                        : 0}px;\n                    `}\n                  >\n                    <div\n                      css={`\n                        display: flex;\n                        align-items: center;\n                        margin: ${2 * GU}px 0 ${1 * GU}px;\n                        color: ${theme.surfaceContentSecondary};\n                        ${textStyle('label2')};\n                      `}\n                    >\n                      {label}\n                    </div>\n\n                    <div>{content}</div>\n                  </div>\n                ))}\n            </div>\n            {hasExpansion && (\n              <EntryExpansion\n                expansion={entry.expansion}\n                opened={opened === entry.index}\n                rowHeight={rowHeight}\n              />\n            )}\n          </div>\n        )\n      })}\n    </React.Fragment>\n  )\n}\n\nListView.propTypes = {\n  allSelected: PropTypes.oneOf([-1, 0, 1]).isRequired,\n  entries: PropTypes.array.isRequired,\n  fields: PropTypes.array.isRequired,\n  hasAnyExpansion: PropTypes.bool.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  renderSelectionCount: PropTypes.func.isRequired,\n  rowHeight: PropTypes.number.isRequired,\n  selectable: PropTypes.bool.isRequired,\n}\n\n// Disable prop types check for internal components\n/* eslint-disable react/prop-types */\n\nfunction EntryExpansion({ expansion, opened, rowHeight }) {\n  const theme = useTheme()\n\n  // Handles the height of the expansion in free layout mode\n  const [freeLayoutContentHeight, setFreeLayoutContentHeight] = useState(0)\n\n  const handleFreeLayoutContentRef = useCallback(element => {\n    if (element) {\n      setFreeLayoutContentHeight(element.getBoundingClientRect().height)\n    }\n  }, [])\n\n  const height = expansion.freeLayout\n    ? freeLayoutContentHeight\n    : rowHeight * expansion.content.length\n\n  return (\n    <Transition\n      native\n      items={opened}\n      from={{ height: 0 }}\n      enter={{ height }}\n      update={{ height }}\n      leave={{ height: 0 }}\n      config={{ ...springs.smooth, precision: 0.1 }}\n    >\n      {show =>\n        show &&\n        (({ height }) => (\n          <animated.div\n            css={`\n              overflow: hidden;\n              background: ${theme.surfaceUnder};\n              margin-left: ${-6.5 * GU}px;\n              margin-right: ${-3 * GU}px;\n              padding-left: ${6.5 * GU}px;\n              box-shadow: inset 0 6px 4px -4px rgba(0, 0, 0, 0.16);\n            `}\n            style={{\n              height: height.interpolate(v => `${v}px`),\n            }}\n          >\n            {expansion.content.map((child, i) => (\n              <div\n                key={i}\n                ref={expansion.freeLayout ? handleFreeLayoutContentRef : null}\n                css={`\n                  display: flex;\n                  align-items: center;\n                  height: ${expansion.freeLayout ? 'auto' : `${rowHeight}px`};\n                  padding-right: ${3 * GU}px;\n                `}\n              >\n                {child}\n              </div>\n            ))}\n          </animated.div>\n        ))\n      }\n    </Transition>\n  )\n}\n\nfunction Select({ index, selected, onSelect }) {\n  const change = useCallback(\n    check => {\n      onSelect(index, check)\n    },\n    [index, onSelect]\n  )\n\n  return <Checkbox onChange={change} checked={selected} />\n}\n\n/* eslint-enable react/prop-types */\n\nexport { ListView }\n"]},"metadata":{},"sourceType":"module"}